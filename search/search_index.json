{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":""},{"location":"#plataforma-escalavel-em-nuvem-para-conversao-de-imagens-em-base64","title":"Plataforma Escal\u00e1vel em Nuvem Para Convers\u00e3o de Imagens em Base64","text":"Edi\u00e7\u00e3o <p>2025.2</p>"},{"location":"#grupokit-d","title":"Grupo/Kit D","text":"<ul> <li>Eduardo Zorzi</li> <li>Mateus Marinheiro</li> <li>Thiago Gouveia</li> </ul>"},{"location":"#introducao","title":"Introdu\u00e7\u00e3o","text":"<p>O projeto tem como prop\u00f3sito o desenvolvimento de uma aplica\u00e7\u00e3o completa baseada em computa\u00e7\u00e3o em nuvem, integrando diferentes servi\u00e7os da Amazon Web Services (AWS) para construir uma solu\u00e7\u00e3o escal\u00e1vel e segura. </p> <p>A aplica\u00e7\u00e3o consiste em uma \u00c1rea de Clientes capaz de realizar o upload, armazenamento, processamento e exibi\u00e7\u00e3o de imagens, utilizando componentes como Amazon S3, EC2, Lambda, DynamoDB e API Gateway. O projeto visa n\u00e3o apenas a implementa\u00e7\u00e3o t\u00e9cnica, mas tamb\u00e9m o dom\u00ednio de boas pr\u00e1ticas de arquitetura em nuvem, automa\u00e7\u00e3o e documenta\u00e7\u00e3o detalhada de toda a infraestrutura.</p>"},{"location":"anexoA/estagio1/","title":"Est\u00e1gio 1","text":""},{"location":"anexoA/estagio1/#anexo-a","title":"Anexo A","text":""},{"location":"anexoA/estagio1/#estagio-1-estrutura-minima-obj-1-e-2","title":"Est\u00e1gio 1 - Estrutura m\u00ednima (Obj. 1 e 2)","text":""},{"location":"anexoA/estagio1/#regular-2","title":"Regular (2)","text":"<p>Nesta etapa do Est\u00e1gio 1, foi criada a estrutura do site est\u00e1tico hospedado no servi\u00e7o Amazon S3, que serve como interface inicial da aplica\u00e7\u00e3o. O objetivo \u00e9 disponibilizar um site p\u00fablico com as p\u00e1ginas principais do projeto \u2014 Empresa, Grupo e \u00c1rea de Clientes \u2014 comprovando o funcionamento do Static Website Hosting e a correta configura\u00e7\u00e3o dos arquivos necess\u00e1rios.</p> <p>Foi criado o bucket chamado <code>cloud25b-project</code> na regi\u00e3o <code>us-east-1</code> (N. Virginia). Esse bucket foi configurado para Website Hosting, permitindo acesso p\u00fablico apenas para leitura dos arquivos est\u00e1ticos do site.</p> <p>A configura\u00e7\u00e3o de hospedagem foi feita na aba Properties \u2192 Static website hosting, conforme evidenciado abaixo:</p> <p> Figura 1 \u2014 Bucket S3 \u201ccloud25b-project\u201d configurado com Website Hosting ativo e endpoint p\u00fablico habilitado.</p> <p>O endpoint p\u00fablico gerado pelo S3 \u00e9: http://cloud25d-project.s3-website-us-east-1.amazonaws.com </p> <p>Esse link permite acesso direto ao site publicado, hospedado integralmente dentro do bucket S3.</p> <p>O bucket cont\u00e9m os seguintes arquivos:</p> Nome do Objeto Tipo Fun\u00e7\u00e3o <code>homepage.html</code> HTML P\u00e1gina principal (Home) do site <code>404.html</code> HTML P\u00e1gina exibida em caso de erro ou rota inexistente <code>scripts.js</code> JavaScript Cont\u00e9m a l\u00f3gica de intera\u00e7\u00e3o e scripts do front-end <code>styles.css</code> CSS Define o estilo visual e a formata\u00e7\u00e3o do site <code>uploads/</code> Pasta Diret\u00f3rio preparado para armazenar imagens enviadas pelos usu\u00e1rios (etapas futuras) <p>A estrutura pode ser visualizada no console da AWS conforme imagem abaixo:</p> <p> Figura 2 \u2014 Arquivos HTML, CSS e JS hospedados no bucket \u201ccloud25b-project\u201d, compondo o site est\u00e1tico.</p> <p>A seguir est\u00e3o o HTML que comp\u00f5em o site est\u00e1tico hospedado no S3.</p> HTML <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"pt-BR\"&gt;\n&lt;head&gt;\n    &lt;meta charset=\"UTF-8\"&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;title&gt;CloudTech Solutions - Computa\u00e7\u00e3o em Nuvem&lt;/title&gt;\n    &lt;meta name=\"description\" content=\"CloudTech Solutions - Transformando o futuro atrav\u00e9s da computa\u00e7\u00e3o em nuvem. Inova\u00e7\u00e3o, seguran\u00e7a e performance.\"&gt;\n    &lt;link rel=\"stylesheet\" href=\"styles.css\"&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\"&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;!-- Header --&gt;\n    &lt;header id=\"header\" class=\"header\"&gt;\n        &lt;div class=\"container\"&gt;\n            &lt;div class=\"header-content\"&gt;\n                &lt;div class=\"logo animate-fade-in\"&gt;\n                    &lt;div class=\"logo-icon\"&gt;\n                        &lt;i class=\"fas fa-cloud\"&gt;&lt;/i&gt;\n                        &lt;div class=\"logo-glow\"&gt;\n                            &lt;i class=\"fas fa-cloud\"&gt;&lt;/i&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                    &lt;span class=\"logo-text\"&gt;Demay's Infra Company&lt;/span&gt;\n                &lt;/div&gt;\n\n                &lt;nav class=\"nav-desktop\"&gt;\n                    &lt;button class=\"nav-btn active\" data-section=\"home\"&gt;In\u00edcio&lt;/button&gt;\n                    &lt;button class=\"nav-btn\" data-section=\"about\"&gt;Nossa Hist\u00f3ria&lt;/button&gt;\n                    &lt;button class=\"nav-btn\" data-section=\"team\"&gt;Equipe&lt;/button&gt;\n                    &lt;button class=\"nav-btn\" data-section=\"clients\"&gt;\u00c1rea de Clientes&lt;/button&gt;\n                &lt;/nav&gt;\n\n                &lt;button class=\"mobile-menu-btn\"&gt;\n                    &lt;i class=\"fas fa-bars\"&gt;&lt;/i&gt;\n                &lt;/button&gt;\n            &lt;/div&gt;\n\n            &lt;nav class=\"nav-mobile\"&gt;\n                &lt;button class=\"nav-btn active\" data-section=\"home\"&gt;In\u00edcio&lt;/button&gt;\n                &lt;button class=\"nav-btn\" data-section=\"about\"&gt;Nossa Hist\u00f3ria&lt;/button&gt;\n                &lt;button class=\"nav-btn\" data-section=\"team\"&gt;Equipe&lt;/button&gt;\n                &lt;button class=\"nav-btn\" data-section=\"clients\"&gt;\u00c1rea de Clientes&lt;/button&gt;\n            &lt;/nav&gt;\n        &lt;/div&gt;\n    &lt;/header&gt;\n\n    &lt;main&gt;\n        &lt;!-- Hero Section --&gt;\n        &lt;section id=\"home\" class=\"hero\"&gt;\n            &lt;div class=\"hero-bg\"&gt;\n                &lt;img src=\"src/assets/hero-cloud-bg.jpg\" alt=\"Cloud Background\"&gt;\n            &lt;/div&gt;\n            &lt;div class=\"hero-effects\"&gt;\n                &lt;div class=\"floating-element\" style=\"animation-delay: 0s;\"&gt;&lt;/div&gt;\n                &lt;div class=\"floating-element\" style=\"animation-delay: 1s;\"&gt;&lt;/div&gt;\n                &lt;div class=\"floating-element\" style=\"animation-delay: 2s;\"&gt;&lt;/div&gt;\n            &lt;/div&gt;\n\n            &lt;div class=\"container hero-content\"&gt;\n                &lt;div class=\"hero-text\"&gt;\n                    &lt;h1 class=\"hero-title animate-fade-in\"&gt;\n                        &lt;span class=\"text-gradient glow-text\"&gt;Demay's Infra&lt;/span&gt;&lt;br&gt;\n                        &lt;span&gt;Company&lt;/span&gt;\n                    &lt;/h1&gt;\n\n                    &lt;p class=\"hero-subtitle animate-fade-in\" style=\"animation-delay: 0.2s;\"&gt;\n                        Transformando o futuro atrav\u00e9s da computa\u00e7\u00e3o em nuvem&lt;br&gt;\n                        &lt;span class=\"highlight\"&gt;Inova\u00e7\u00e3o \u2022 Seguran\u00e7a \u2022 Performance&lt;/span&gt;\n                    &lt;/p&gt;\n\n                    &lt;div class=\"hero-features animate-fade-in\" style=\"animation-delay: 0.4s;\"&gt;\n                        &lt;div class=\"feature-card\"&gt;\n                            &lt;i class=\"fas fa-cloud\"&gt;&lt;/i&gt;\n                            &lt;h3&gt;Cloud Native&lt;/h3&gt;\n                            &lt;p&gt;Solu\u00e7\u00f5es 100% em nuvem&lt;/p&gt;\n                        &lt;/div&gt;\n                        &lt;div class=\"feature-card\"&gt;\n                            &lt;i class=\"fas fa-shield-alt\"&gt;&lt;/i&gt;\n                            &lt;h3&gt;Seguran\u00e7a Total&lt;/h3&gt;\n                            &lt;p&gt;Prote\u00e7\u00e3o de dados avan\u00e7ada&lt;/p&gt;\n                        &lt;/div&gt;\n                        &lt;div class=\"feature-card\"&gt;\n                            &lt;i class=\"fas fa-bolt\"&gt;&lt;/i&gt;\n                            &lt;h3&gt;Alta Performance&lt;/h3&gt;\n                            &lt;p&gt;Velocidade incompar\u00e1vel&lt;/p&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n\n                    &lt;div class=\"hero-cta animate-fade-in\" style=\"animation-delay: 0.6s;\"&gt;\n                        &lt;button class=\"btn btn-hero\" data-section=\"about\"&gt;Conhe\u00e7a Nossa Hist\u00f3ria&lt;/button&gt;\n                        &lt;a href=\"../html/client-page.html\" class=\"btn btn-outline\"&gt;\u00c1rea de Clientes&lt;/a&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n\n            &lt;div class=\"scroll-indicator\"&gt;\n                &lt;div class=\"scroll-mouse\"&gt;\n                    &lt;div class=\"scroll-dot\"&gt;&lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/section&gt;\n\n        &lt;!-- About Section --&gt;\n        &lt;section id=\"about\" class=\"about\"&gt;\n            &lt;div class=\"container\"&gt;\n                &lt;div class=\"section-header animate-fade-in\"&gt;\n                    &lt;h2&gt;Nossa &lt;span class=\"text-gradient\"&gt;Hist\u00f3ria&lt;/span&gt;&lt;/h2&gt;\n                    &lt;p&gt;Desde 2018, a Demay's Infra revoluciona o mercado de computa\u00e7\u00e3o em nuvem, oferecendo solu\u00e7\u00f5es inovadoras que transformam neg\u00f3cios em todo o mundo.&lt;/p&gt;\n                &lt;/div&gt;\n\n                &lt;div class=\"about-content\"&gt;\n                    &lt;div class=\"mission-vision\"&gt;\n                        &lt;div class=\"card animate-fade-in\" style=\"animation-delay: 0.2s;\"&gt;\n                            &lt;div class=\"card-header\"&gt;\n                                &lt;h3 class=\"text-gradient\"&gt;Nossa Miss\u00e3o&lt;/h3&gt;\n                            &lt;/div&gt;\n                            &lt;div class=\"card-content\"&gt;\n                                &lt;p&gt;Transformar a maneira como as empresas operam atrav\u00e9s de solu\u00e7\u00f5es em nuvem seguras, escal\u00e1veis e inovadoras. Acreditamos que a tecnologia deve ser acess\u00edvel e poderosa, permitindo que nossos clientes foquem no que fazem de melhor.&lt;/p&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n\n                        &lt;div class=\"card animate-fade-in\" style=\"animation-delay: 0.4s;\"&gt;\n                            &lt;div class=\"card-header\"&gt;\n                                &lt;h3 class=\"text-gradient\"&gt;Nossa Vis\u00e3o&lt;/h3&gt;\n                            &lt;/div&gt;\n                            &lt;div class=\"card-content\"&gt;\n                                &lt;p&gt;Ser a empresa l\u00edder mundial em computa\u00e7\u00e3o em nuvem, reconhecida pela excel\u00eancia em inova\u00e7\u00e3o, seguran\u00e7a e atendimento ao cliente. Queremos criar um futuro onde a tecnologia conecta e potencializa todos os neg\u00f3cios.&lt;/p&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n\n                    &lt;div class=\"timeline-section\"&gt;\n                        &lt;h3 class=\"timeline-title animate-fade-in\"&gt;Marcos da Nossa &lt;span class=\"text-gradient\"&gt;Jornada&lt;/span&gt;&lt;/h3&gt;\n                        &lt;div class=\"timeline\"&gt;\n                            &lt;div class=\"timeline-item animate-fade-in\" style=\"animation-delay: 0.1s;\"&gt;\n                                &lt;div class=\"timeline-icon\"&gt;\n                                    &lt;i class=\"fas fa-building\"&gt;&lt;/i&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"timeline-content\"&gt;\n                                    &lt;div class=\"timeline-year\"&gt;2018&lt;/div&gt;\n                                    &lt;h4&gt;Funda\u00e7\u00e3o&lt;/h4&gt;\n                                    &lt;p&gt;Demay's nasce com a vis\u00e3o de democratizar a computa\u00e7\u00e3o em nuvem&lt;/p&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                            &lt;div class=\"timeline-item animate-fade-in\" style=\"animation-delay: 0.2s;\"&gt;\n                                &lt;div class=\"timeline-icon\"&gt;\n                                    &lt;i class=\"fas fa-rocket\"&gt;&lt;/i&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"timeline-content\"&gt;\n                                    &lt;div class=\"timeline-year\"&gt;2020&lt;/div&gt;\n                                    &lt;h4&gt;Expans\u00e3o&lt;/h4&gt;\n                                    &lt;p&gt;Primeira expans\u00e3o internacional e 1000+ clientes atendidos&lt;/p&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                            &lt;div class=\"timeline-item animate-fade-in\" style=\"animation-delay: 0.3s;\"&gt;\n                                &lt;div class=\"timeline-icon\"&gt;\n                                    &lt;i class=\"fas fa-award\"&gt;&lt;/i&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"timeline-content\"&gt;\n                                    &lt;div class=\"timeline-year\"&gt;2022&lt;/div&gt;\n                                    &lt;h4&gt;Inova\u00e7\u00e3o&lt;/h4&gt;\n                                    &lt;p&gt;Lan\u00e7amento da plataforma de IA propriet\u00e1ria CloudAI&lt;/p&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                            &lt;div class=\"timeline-item animate-fade-in\" style=\"animation-delay: 0.4s;\"&gt;\n                                &lt;div class=\"timeline-icon\"&gt;\n                                    &lt;i class=\"fas fa-users\"&gt;&lt;/i&gt;\n                                &lt;/div&gt;\n                                &lt;div class=\"timeline-content\"&gt;\n                                    &lt;div class=\"timeline-year\"&gt;2024&lt;/div&gt;\n                                    &lt;h4&gt;Lideran\u00e7a&lt;/h4&gt;\n                                    &lt;p&gt;Reconhecidos como l\u00edder em solu\u00e7\u00f5es cloud no Brasil&lt;/p&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n\n                    &lt;div class=\"values-section animate-fade-in\" style=\"animation-delay: 0.6s;\"&gt;\n                        &lt;div class=\"card\"&gt;\n                            &lt;div class=\"card-header\"&gt;\n                                &lt;h3&gt;Nossos &lt;span class=\"text-gradient\"&gt;Valores&lt;/span&gt;&lt;/h3&gt;\n                            &lt;/div&gt;\n                            &lt;div class=\"card-content\"&gt;\n                                &lt;div class=\"values-grid\"&gt;\n                                    &lt;div class=\"value-item\"&gt;\n                                        &lt;h4&gt;Inova\u00e7\u00e3o&lt;/h4&gt;\n                                        &lt;p&gt;Sempre na vanguarda da tecnologia, criando solu\u00e7\u00f5es que antecipam o futuro.&lt;/p&gt;\n                                    &lt;/div&gt;\n                                    &lt;div class=\"value-item\"&gt;\n                                        &lt;h4&gt;Seguran\u00e7a&lt;/h4&gt;\n                                        &lt;p&gt;Prote\u00e7\u00e3o de dados \u00e9 nossa prioridade absoluta em todas as solu\u00e7\u00f5es.&lt;/p&gt;\n                                    &lt;/div&gt;\n                                    &lt;div class=\"value-item\"&gt;\n                                        &lt;h4&gt;Excel\u00eancia&lt;/h4&gt;\n                                        &lt;p&gt;Comprometimento com a qualidade superior em cada projeto entregue.&lt;/p&gt;\n                                    &lt;/div&gt;\n                                &lt;/div&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/section&gt;\n\n        &lt;!-- Team Section --&gt;\n        &lt;section id=\"team\" class=\"team\"&gt;\n            &lt;div class=\"container\"&gt;\n                &lt;div class=\"section-header animate-fade-in\"&gt;\n                    &lt;h2&gt;Nossa &lt;span class=\"text-gradient\"&gt;Equipe&lt;/span&gt;&lt;/h2&gt;\n                    &lt;p&gt;Profissionais apaixonados por tecnologia, unidos pela miss\u00e3o de transformar o mundo atrav\u00e9s da computa\u00e7\u00e3o em nuvem.&lt;/p&gt;\n                &lt;/div&gt;\n\n                &lt;div class=\"team-stats\"&gt;\n                    &lt;div class=\"stat-card animate-fade-in\" style=\"animation-delay: 0.1s;\"&gt;\n                        &lt;div class=\"stat-number\"&gt;50+&lt;/div&gt;\n                        &lt;div class=\"stat-label\"&gt;Profissionais&lt;/div&gt;\n                    &lt;/div&gt;\n                    &lt;div class=\"stat-card animate-fade-in\" style=\"animation-delay: 0.2s;\"&gt;\n                        &lt;div class=\"stat-number\"&gt;15+&lt;/div&gt;\n                        &lt;div class=\"stat-label\"&gt;Anos de Experi\u00eancia&lt;/div&gt;\n                    &lt;/div&gt;\n                    &lt;div class=\"stat-card animate-fade-in\" style=\"animation-delay: 0.3s;\"&gt;\n                        &lt;div class=\"stat-number\"&gt;1000+&lt;/div&gt;\n                        &lt;div class=\"stat-label\"&gt;Projetos Entregues&lt;/div&gt;\n                    &lt;/div&gt;\n                    &lt;div class=\"stat-card animate-fade-in\" style=\"animation-delay: 0.4s;\"&gt;\n                        &lt;div class=\"stat-number\"&gt;25+&lt;/div&gt;\n                        &lt;div class=\"stat-label\"&gt;Certifica\u00e7\u00f5es Cloud&lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n\n                &lt;div class=\"team-members\"&gt;\n                    &lt;div class=\"member-card animate-fade-in\" style=\"animation-delay: 0.1s;\"&gt;\n                        &lt;div class=\"member-avatar\"&gt;\n                            &lt;img src=\"https://avatars.githubusercontent.com/u/7607583?v=4\" alt=\"Thiago Demay\"&gt;\n                            &lt;div class=\"avatar-glow\"&gt;&lt;/div&gt;\n                        &lt;/div&gt;\n                        &lt;div class=\"member-info\"&gt;\n                            &lt;h4&gt;Thiago Demay&lt;/h4&gt;\n                            &lt;p class=\"member-role\"&gt;CEO &amp; Founder&lt;/p&gt;\n                            &lt;p class=\"member-bio\"&gt;Vision\u00e1rio em tecnologia com 15+ anos de experi\u00eancia em cloud computing. Formada em Engenharia de Software pela USP.&lt;/p&gt;\n                            &lt;div class=\"member-skills\"&gt;\n                                &lt;span class=\"skill-tag\"&gt;Lideran\u00e7a&lt;/span&gt;\n                                &lt;span class=\"skill-tag\"&gt;Cloud Architecture&lt;/span&gt;\n                                &lt;span class=\"skill-tag\"&gt;Strategy&lt;/span&gt;\n                            &lt;/div&gt;\n                            &lt;div class=\"member-social\"&gt;\n                                &lt;i class=\"fab fa-linkedin\"&gt;&lt;/i&gt;\n                                &lt;i class=\"fab fa-github\"&gt;&lt;/i&gt;\n                                &lt;i class=\"fas fa-envelope\"&gt;&lt;/i&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n\n                    &lt;div class=\"member-card animate-fade-in\" style=\"animation-delay: 0.2s;\"&gt;\n                        &lt;div class=\"member-avatar\"&gt;\n                            &lt;img src=\"https://lh3.googleusercontent.com/a/ACg8ocJ2J2rwbD5LFsScw-QYTzzI3oyqoJ99eQTZwXZv1OgZ550stEA=s192-c\" alt=\"Mateus Marinheiro\"&gt;\n                            &lt;div class=\"avatar-glow\"&gt;&lt;/div&gt;\n                        &lt;/div&gt;\n                        &lt;div class=\"member-info\"&gt;\n                            &lt;h4&gt;Mateus Marinheiro&lt;/h4&gt;\n                            &lt;p class=\"member-role\"&gt;CTO&lt;/p&gt;\n                            &lt;p class=\"member-bio\"&gt;Especialista em arquiteturas distribu\u00eddas e seguran\u00e7a cibern\u00e9tica. PhD em Engenharia da Computa\u00e7\u00e3o pela USP.&lt;/p&gt;\n                            &lt;div class=\"member-skills\"&gt;\n                                &lt;span class=\"skill-tag\"&gt;Cloud Computing&lt;/span&gt;\n                                &lt;span class=\"skill-tag\"&gt;Security&lt;/span&gt;\n                                &lt;span class=\"skill-tag\"&gt;SaaS&lt;/span&gt;\n                            &lt;/div&gt;\n                            &lt;div class=\"member-social\"&gt;\n                                &lt;i class=\"fab fa-linkedin\"&gt;&lt;/i&gt;\n                                &lt;i class=\"fab fa-github\"&gt;&lt;/i&gt;\n                                &lt;i class=\"fas fa-envelope\"&gt;&lt;/i&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n\n                    &lt;div class=\"member-card animate-fade-in\" style=\"animation-delay: 0.3s;\"&gt;\n                        &lt;div class=\"member-avatar\"&gt;\n                            &lt;img src=\"https://avatars.githubusercontent.com/u/130405994?v=4\" alt=\"Eduardo Zorzi\"&gt;\n                            &lt;div class=\"avatar-glow\"&gt;&lt;/div&gt;\n                        &lt;/div&gt;\n                        &lt;div class=\"member-info\"&gt;\n                            &lt;h4&gt;Eduardo Zorzi&lt;/h4&gt;\n                            &lt;p class=\"member-role\"&gt;In N Out Manager&lt;/p&gt;\n                            &lt;p class=\"member-bio\"&gt;Especialista em estrat\u00e9gias de entrada e saida da corpora\u00e7\u00e3o. Cuida do fluxo de entrada e sa\u00edda de pessoas, al\u00e9m de ser mestre em cadsatros.&lt;/p&gt;\n                            &lt;div class=\"member-skills\"&gt;\n                                &lt;span class=\"skill-tag\"&gt;iFood&lt;/span&gt;\n                                &lt;span class=\"skill-tag\"&gt;Uber&lt;/span&gt;\n                                &lt;span class=\"skill-tag\"&gt;Prefect&lt;/span&gt;\n                            &lt;/div&gt;\n                            &lt;div class=\"member-social\"&gt;\n                                &lt;i class=\"fab fa-linkedin\"&gt;&lt;/i&gt;\n                                &lt;i class=\"fab fa-github\"&gt;&lt;/i&gt;\n                                &lt;i class=\"fas fa-envelope\"&gt;&lt;/i&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n\n                    &lt;div class=\"member-card animate-fade-in\" style=\"animation-delay: 0.3s;\"&gt;\n                        &lt;div class=\"member-avatar\"&gt;\n                            &lt;img src=\"https://media.licdn.com/dms/image/v2/D4D03AQG5x4v70kZliw/profile-displayphoto-scale_400_400/B4DZgY4l5QG8Ag-/0/1752764146448?e=1761782400&amp;v=beta&amp;t=5EiG0_DzGbdOvkfNY_8amRtqcmTlXv3ocxrXg9azoKk\" alt=\"Thiago Gouveia\"&gt;\n                            &lt;div class=\"avatar-glow\"&gt;&lt;/div&gt;\n                        &lt;/div&gt;\n                        &lt;div class=\"member-info\"&gt;\n                            &lt;h4&gt;Thiago Gouveia&lt;/h4&gt;\n                            &lt;p class=\"member-role\"&gt;Front Office&lt;/p&gt;\n                            &lt;p class=\"member-bio\"&gt;Sempre a frente da entrada da coropora\u00e7\u00e3o, evitando a entrada de pessoas mal intencionadas. \u00c1gil na hora de puxar o r\u00e1dio ao relatar ocorr\u00eancias.&lt;/p&gt;\n                            &lt;div class=\"member-skills\"&gt;\n                                &lt;span class=\"skill-tag\"&gt;Mr Aura&lt;/span&gt;\n                                &lt;span class=\"skill-tag\"&gt;Terno&lt;/span&gt;\n                                &lt;span class=\"skill-tag\"&gt;R\u00e1dio&lt;/span&gt;\n                            &lt;/div&gt;\n                            &lt;div class=\"member-social\"&gt;\n                                &lt;i class=\"fab fa-linkedin\"&gt;&lt;/i&gt;\n                                &lt;i class=\"fab fa-github\"&gt;&lt;/i&gt;\n                                &lt;i class=\"fas fa-envelope\"&gt;&lt;/i&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/section&gt;\n\n        &lt;!-- Clients Section --&gt;\n        &lt;section id=\"clients\" class=\"clients\"&gt;\n            &lt;div class=\"container\"&gt;\n                &lt;div class=\"section-header animate-fade-in\"&gt;\n                    &lt;h2&gt;\u00c1rea de &lt;span class=\"text-gradient\"&gt;Clientes&lt;/span&gt;&lt;/h2&gt;\n                    &lt;p&gt;Acesse nossa plataforma exclusiva para gerenciar suas imagens, tags e convers\u00f5es Base64.&lt;/p&gt;\n                &lt;/div&gt;\n\n                &lt;div class=\"clients-content\"&gt;\n                    &lt;div class=\"client-features\"&gt;\n                        &lt;div class=\"feature-item animate-fade-in\" style=\"animation-delay: 0.2s;\"&gt;\n                            &lt;i class=\"fas fa-upload\"&gt;&lt;/i&gt;\n                            &lt;h4&gt;Upload Seguro&lt;/h4&gt;\n                            &lt;p&gt;Envie suas imagens com total seguran\u00e7a e criptografia&lt;/p&gt;\n                        &lt;/div&gt;\n                        &lt;div class=\"feature-item animate-fade-in\" style=\"animation-delay: 0.4s;\"&gt;\n                            &lt;i class=\"fas fa-tags\"&gt;&lt;/i&gt;\n                            &lt;h4&gt;Sistema de Tags&lt;/h4&gt;\n                            &lt;p&gt;Organize e identifique suas imagens com tags personalizadas&lt;/p&gt;\n                        &lt;/div&gt;\n                        &lt;div class=\"feature-item animate-fade-in\" style=\"animation-delay: 0.6s;\"&gt;\n                            &lt;i class=\"fas fa-code\"&gt;&lt;/i&gt;\n                            &lt;h4&gt;Convers\u00e3o Base64&lt;/h4&gt;\n                            &lt;p&gt;Visualize e baixe a convers\u00e3o Base64 das suas imagens&lt;/p&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n\n                    &lt;div class=\"client-cta animate-fade-in\" style=\"animation-delay: 0.8s;\"&gt;\n                        &lt;a href=\"http://alb-cloud25d-1290402490.us-east-1.elb.amazonaws.com\" class=\"btn btn-hero btn-large\"&gt;\n                            &lt;i class=\"fas fa-arrow-right\"&gt;&lt;/i&gt;\n                            Acessar \u00c1rea de Clientes\n                        &lt;/a&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/section&gt;\n    &lt;/main&gt;\n\n    &lt;!-- Footer --&gt;\n    &lt;footer class=\"footer\"&gt;\n        &lt;div class=\"container\"&gt;\n            &lt;div class=\"footer-content\"&gt;\n                &lt;div class=\"footer-logo\"&gt;\n                    &lt;div class=\"logo-icon\"&gt;\n                        &lt;i class=\"fas fa-cloud\"&gt;&lt;/i&gt;\n                    &lt;/div&gt;\n                    &lt;span class=\"logo-text\"&gt;Demay's Infra Company&lt;/span&gt;\n                &lt;/div&gt;\n                &lt;p class=\"footer-text\"&gt;Transformando o futuro atrav\u00e9s da computa\u00e7\u00e3o em nuvem&lt;/p&gt;\n                &lt;div class=\"footer-copyright\"&gt;\n                    &lt;span&gt;\u00a9 2024 Demay's Infra Company. Todos os direitos reservados.&lt;/span&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/footer&gt;\n\n    &lt;!-- Toast Container --&gt;\n    &lt;div id=\"toast-container\" class=\"toast-container\"&gt;&lt;/div&gt;\n\n    &lt;script src=\"script.js\"&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>A inst\u00e2ncia EC2 \u00e9 respons\u00e1vel por rodar o back-end da \u00c1rea de Clientes da aplica\u00e7\u00e3o. No n\u00edvel Regular \u00e9 exigido que a EC2 esteja em execu\u00e7\u00e3o, com <code>Status checks: 2/2 passed</code>, acess\u00edvel publicamente (quando apropriado) e que exponha o endpoint <code>/health</code> retornando HTTP 200 para comprovar que o servi\u00e7o est\u00e1 ativo.</p> <ul> <li> <p>Inst\u00e2ncia EC2 em execu\u00e7\u00e3o: <code>evidence_ec2_running.png</code> Legenda: Inst\u00e2ncia EC2 \u201cEC2-Cloud25D\u201d em execu\u00e7\u00e3o (Running), tipo <code>t2.micro</code> e <code>Status checks: 2/2 passed</code> \u2014 evid\u00eancia de inst\u00e2ncia operacional.</p> </li> <li> <p>Security Group associado \u00e0 EC2: <code>evidence_security_group.png</code> Legenda: Security Group da EC2 com regras Inbound.</p> </li> <li> <p>Role IAM vinculada \u00e0 EC2: <code>evidence_iam_role.png</code> Legenda: Role IAM <code>EC2-ImageApp-Role</code> associada \u00e0 inst\u00e2ncia, com pol\u00edticas m\u00ednimas para acessar recursos AWS (ex.: DynamoDB, S3) sem embutir credenciais.</p> </li> <li> <p>Resposta do endpoint /health: <code>evidence_health_check.png</code> Legenda: Resposta do endpoint <code>/health</code> retornando <code>{\"status\":\"ok\"}</code> (HTTP 200), comprovando que o servi\u00e7o est\u00e1 ativo e respondendo.</p> </li> </ul> <p>A Virtual Private Cloud (VPC) \u00e9 o componente fundamental da infraestrutura em nuvem, pois define o ambiente de rede isolado onde todos os recursos da aplica\u00e7\u00e3o \u2014 como EC2 e ALB \u2014 s\u00e3o provisionados. No projeto, a VPC foi criada para garantir seguran\u00e7a, segmenta\u00e7\u00e3o e controle de tr\u00e1fego entre os servi\u00e7os hospedados na AWS.  </p> <p>Nesta etapa, a VPC atende aos requisitos do n\u00edvel Regular, contendo: - Uma VPC personalizada (n\u00e3o a default); - Uma sub-rede p\u00fablica associada a ela; - Uma tabela de rotas permitindo acesso externo por meio de um Internet Gateway (IGW); - E Security Groups controlando o tr\u00e1fego de entrada e sa\u00edda.</p> Componente Descri\u00e7\u00e3o VPC Rede principal que abriga todos os recursos do projeto. CIDR configurado: <code>172.31.0.0/16</code>. Sub-rede p\u00fablica Criada dentro da VPC e associada \u00e0 tabela de rotas p\u00fablica. Respons\u00e1vel por permitir comunica\u00e7\u00e3o da EC2 com a internet. Route Table Cont\u00e9m a rota <code>0.0.0.0/0</code> apontando para o Internet Gateway, garantindo conectividade externa. Internet Gateway (IGW) Fornece acesso p\u00fablico \u00e0 EC2 e \u00e0 aplica\u00e7\u00e3o via HTTP/HTTPS. Security Groups Controlam portas de entrada (80/443) e restringem SSH a IPs espec\u00edficos. <p> Figura 1 \u2014 Painel da VPC, com estado \u201cAvailable\u201d e faixa de endere\u00e7amento <code>172.31.0.0/16</code>. DNS resolution e hostnames habilitados, e tabela de rotas associada.</p> <p> Figura 2 \u2014 Sub-rede p\u00fablica associada \u00e0 VPC, exibindo o CIDR e a zona de disponibilidade.</p> <p> Figura 3 \u2014 Tabela de rotas associada \u00e0 VPC. Comprova que a VPC tem sa\u00edda para a internet via Internet Gateway.</p> <p> Figura 4 \u2014 Regras Inbound do Security Group, permitindo tr\u00e1fego HTTP (80) e HTTPS (443) e restringindo SSH (22) ao IP do administrador.</p>"},{"location":"anexoA/estagio1/#bom-3","title":"Bom (3)","text":"<p>Nesta se\u00e7\u00e3o detalharemos a organiza\u00e7\u00e3o da VPC em sub-redes p\u00fablicas e privadas, a implanta\u00e7\u00e3o e configura\u00e7\u00e3o de um Application Load Balancer (ALB) com seu Target Group e health checks, a associa\u00e7\u00e3o de inst\u00e2ncias EC2 ao ALB e as verifica\u00e7\u00f5es de funcionamento (teste via browser/curl e comandos AWS CLI). Tamb\u00e9m apresentaremos as evid\u00eancias necess\u00e1rias como screenshots do ALB, do Target Group, das sub-redes e da tabela de rotas, al\u00e9m de um diagrama l\u00f3gico da arquitetura e instru\u00e7\u00f5es de boas pr\u00e1ticas de seguran\u00e7a e opera\u00e7\u00e3o.</p>"},{"location":"anexoA/estagio1/#vpc","title":"VPC","text":"<p>A arquitetura de rede do projeto  foi organizada dentro de uma \u00fanica VPC personalizada, que abriga todos os recursos de infraestrutura da aplica\u00e7\u00e3o. Dentro dessa VPC foram criadas sub-redes p\u00fablicas respons\u00e1veis por hospedar o Application Load Balancer (ALB) e a inst\u00e2ncia EC2 do back-end, e sub-redes privadas (nas zonas <code>us-east-1c</code> e <code>us-east-1d</code>) reservadas para futuras expans\u00f5es, como bancos de dados ou servi\u00e7os internos.</p> <p>O ALB distribui o tr\u00e1fego HTTP recebido da internet para o Target Group, que cont\u00e9m a inst\u00e2ncia EC2 configurada com o endpoint <code>/health</code> para monitoramento de disponibilidade. O tr\u00e1fego de sa\u00edda \u00e9 roteado por uma tabela de rotas p\u00fablica, que direciona o destino <code>0.0.0.0/0</code> para o Internet Gateway (IGW), garantindo conectividade externa de forma controlada e segura.</p>"},{"location":"anexoA/estagio1/#diagrama-da-vpc","title":"Diagrama da VPC","text":"<pre><code>flowchart TD\n  subgraph VPC[\"VPC Cloud25B \u2014 CIDR: 172.31.0.0/16\"]\n    style VPC fill:#f8fbff,stroke:#93c5fd,stroke-width:1px\n\n    subgraph Public[\"Sub-redes P\u00fablicas\"]\n      direction TB\n      ALB[(\"Application Load Balancer\\nListener: 80 (HTTP)\")]:::alb\n      PUB1[\"Sub-rede P\u00fablica \u2014 us-east-1a\"]:::subnet\n      PUB2[\"Sub-rede P\u00fablica \u2014 us-east-1b\"]:::subnet\n      RT[\"Route Table P\u00fablica\\n(rota 0.0.0.0/0 \u2192 IGW)\"]:::rt\n      IGW[\"Internet Gateway\"]:::igw\n    end\n\n    subgraph Private[\"Sub-redes Privadas\"]\n      direction TB\n      PRIV1[\"Sub-rede Privada \u2014 us-east-1c\"]:::subnet\n      PRIV2[\"Sub-rede Privada \u2014 us-east-1d\"]:::subnet\n    end\n\n    subgraph EC2S[\"Inst\u00e2ncias e Target Group\"]\n      direction TB\n      TG[\"Target Group \u2014 cloud25b-target\"]:::tg\n      EC2[(\"Inst\u00e2ncia EC2 \u2014 Cloud25D\\nBackend /health ativo\")]:::ec2\n    end\n  end\n\n  %% Conex\u00f5es\n  ALB --&gt;|Distribui tr\u00e1fego| TG\n  TG --&gt;|Health checks /health| EC2\n  EC2 --&gt; PUB1\n  PUB1 --&gt; RT\n  PUB2 --&gt; RT\n  RT --&gt;|0.0.0.0/0| IGW\n  IGW --&gt; Internet[(Internet)]:::internet\n\n  %% Estilo\n  classDef alb fill:#fff7ed,stroke:#f59e0b,stroke-width:1px;\n  classDef tg fill:#eef2ff,stroke:#6366f1,stroke-width:1px;\n  classDef ec2 fill:#ecfeff,stroke:#06b6d4,stroke-width:1px;\n  classDef subnet fill:#f0f9ff,stroke:#93c5fd,stroke-width:1px;\n  classDef rt fill:#f8fafc,stroke:#94a3b8,stroke-width:1px;\n  classDef igw fill:#fff1f2,stroke:#fb7185,stroke-width:1px;\n  classDef internet fill:#f1f5f9,stroke:#94a3b8,stroke-width:1px;</code></pre>"},{"location":"anexoA/estagio1/#alb-dns","title":"ALB DNS","text":"<p>O Application Load Balancer (ALB) foi criado na VPC do projeto e configurado para distribuir requisi\u00e7\u00f5es HTTP (porta 80) entre as inst\u00e2ncias EC2 do backend. Durante os testes, o ALB apresentou status \u201cActive\u201d, com DNS p\u00fablico acess\u00edvel e health checks configurados para a rota /health, que retornam HTTP 200 OK a partir da inst\u00e2ncia EC2-Cloud25D. Essa configura\u00e7\u00e3o comprova que o balanceador est\u00e1 devidamente provisionado, respondendo a requisi\u00e7\u00f5es externas e mantendo health checks para as inst\u00e2ncias registradas no Target Group.</p>"},{"location":"anexoA/estagio1/#figura-1-application-load-balancer-ativo","title":"Figura 1 \u2014 Application Load Balancer Ativo","text":"<p>\ud83d\udcd8 Figura 1 \u2014 Application Load Balancer criado na regi\u00e3o <code>us-east-1</code>, com estado \u201cActive\u201d, tipo <code>Application</code> e DNS p\u00fablico configurado (<code>cloud25b-alb-xxxxxxx.us-east-1.elb.amazonaws.com</code>). Evid\u00eancia de que o ALB est\u00e1 ativo e acess\u00edvel na VPC <code>vpc-0fe22edc27c75fedb</code>.</p>"},{"location":"anexoA/estagio1/#excelente-4","title":"Excelente (4)","text":"<p>Infra completa e coerente: VPC (2 AZs), IGW, NAT; Security Groups organizados; EC2 com <code>user-data</code> e documenta\u00e7\u00e3o clara das decis\u00f5es.</p>"},{"location":"anexoA/estagio1/#resumo","title":"Resumo","text":"<p>Nesta etapa foram atendidos os requisitos dos n\u00edveis anteriores e entregues artefatos extras necess\u00e1rios para o n\u00edvel Excelente (4): - VPC customizada com duas zonas de disponibilidade (2 AZs) e sub-redes p\u00fablicas/privadas; - Internet Gateway (IGW) e NAT Gateway (para sub-redes privadas com sa\u00edda \u00e0 Internet); - Security Groups (SG) organizados por fun\u00e7\u00e3o (ALB, EC2 backend, SSH administrativo); - Application Load Balancer (ALB) com Target Group e health checks configurados para <code>/health</code>; - Inst\u00e2ncia EC2 configurada via <code>user-data</code> para deploy do backend; - Documenta\u00e7\u00e3o justificando CIDR, tabela de sub-redes/rotas e prints das evid\u00eancias.</p>"},{"location":"anexoA/estagio1/#arquitetura-de-rede-visao-logica","title":"Arquitetura de Rede (vis\u00e3o l\u00f3gica)","text":"<pre><code>flowchart TD\n  subgraph VPC[\"VPC \u2014 CIDR: 10.10.0.0/16 (justifica\u00e7\u00e3o abaixo)\"]\n    style VPC fill:#f8fbff,stroke:#93c5fd,stroke-width:1px\n\n    subgraph Public[\"Sub-redes P\u00fablicas (2 AZs)\"]\n      direction TB\n      ALB[(\"ALB \u2014 Listener 80 (HTTP)\")]:::alb\n      PUB_A[\"Public Subnet \u2014 us-east-1a\\\\nCIDR: 10.10.0.0/24\"]:::subnet\n      PUB_B[\"Public Subnet \u2014 us-east-1b\\\\nCIDR: 10.10.1.0/24\"]:::subnet\n      IGW[\"Internet Gateway\"]:::igw\n    end\n\n    subgraph Private[\"Sub-redes Privadas (2 AZs)\"]\n      direction TB\n      PRIV_A[\"Private Subnet \u2014 us-east-1a\\\\nCIDR: 10.10.10.0/24\"]:::subnet\n      PRIV_B[\"Private Subnet \u2014 us-east-1b\\\\nCIDR: 10.10.11.0/24\"]:::subnet\n      NAT[\"NAT Gateway (in Public Subnet)\"]:::nat\n    end\n\n    subgraph EC2S[\"Recursos\"]\n      direction TB\n      TG[\"Target Group \u2014 cloud25b-target\"]:::tg\n      EC2[(\"EC2 Backend (in Private Subnet)\\\\n/user-data configurado\")]:::ec2\n      RDS[\"(opcional) DB em Private Subnet\"]:::db\n    end\n  end\n\n  ALB --&gt;|HTTP| TG\n  TG --&gt;|health /health| EC2\n  EC2 --&gt; PRIV_A\n  PRIV_A --&gt; NAT\n  NAT --&gt; PUB_A\n  PUB_A --&gt; IGW\n  PUB_B --&gt; IGW\n  IGW --&gt; Internet[(Internet)]:::internet\n\n  classDef alb fill:#fff7ed,stroke:#f59e0b,stroke-width:1px;\n  classDef tg fill:#eef2ff,stroke:#6366f1,stroke-width:1px;\n  classDef ec2 fill:#ecfeff,stroke:#06b6d4,stroke-width:1px;\n  classDef subnet fill:#f0f9ff,stroke:#93c5fd,stroke-width:1px;\n  classDef igw fill:#fff1f2,stroke:#fb7185,stroke-width:1px;\n  classDef nat fill:#fffbe6,stroke:#f59e0b,stroke-width:1px;\n  classDef db fill:#f1f5f9,stroke:#94a3b8,stroke-width:1px;\n  classDef internet fill:#f1f5f9,stroke:#94a3b8,stroke-width:1px;</code></pre>"},{"location":"anexoA/estagio1/#justificativa-do-cidr","title":"Justificativa do CIDR","text":"<p>Escolhemos <code>10.10.0.0/16</code> por ser um bloco privado amplo o suficiente para:</p> <ul> <li>permitir cria\u00e7\u00e3o separada de sub-redes p\u00fablicas/privadas por AZ;  </li> <li>minimizar risco de sobreposi\u00e7\u00e3o com redes on-premises t\u00edpicas (10.x usados frequentemente, mas escolhendo 10.10.0.0 reduz colis\u00f5es \u00f3bvias);  </li> <li>reservar espa\u00e7o para futuras expans\u00f5es (VPNs, peering, conectividade transit).</li> </ul>"},{"location":"anexoA/estagio1/#security-groups-resumo","title":"Security Groups (resumo)","text":"<ul> <li>SG-ALB: permite inbound 80/443 (0.0.0.0/0), outbound para target group (porta 3000 ou porta do backend).  </li> <li>SG-EC2-Backend: permite inbound apenas do SG-ALB na porta do app (ex.: 3000), SSH permitido somente do IP administrativo (meu-IP/32).  </li> <li>SG-NAT: regra padr\u00e3o gerada pelo servi\u00e7o (se usar NAT Gateway).  </li> </ul> <p>Princ\u00edpio aplicado: least privilege \u2014 portas/ips m\u00ednimos necess\u00e1rios.</p>"},{"location":"anexoA/estagio1/#ec2-user-data-bootstrapping","title":"EC2 \u2014 user-data &amp; Bootstrapping","text":"<p>A inst\u00e2ncia EC2 usada para o backend foi provisionada com <code>user-data</code> que: 1. atualiza o SO; 2. instala Node.js (ou outra runtime); 3. puxa c\u00f3digo do reposit\u00f3rio; 4. configura o servi\u00e7o (systemd) para iniciar o backend automaticamente; 5. registra logs em CloudWatch (opcional).</p>"},{"location":"anexoA/estagio1/#health-check-e-alb","title":"Health check e ALB","text":"<ul> <li>ALB configurado com Listener 80 e Target Group apontando para as inst\u00e2ncias EC2 (porta 3000 do app).  </li> <li>Health check: <code>HTTP /health</code> com timeout 5s, intervalo 30s, threshold healthy 2 / unhealthy 2.  </li> <li>Valida\u00e7\u00e3o: Target Group reports <code>healthy</code> para todas as inst\u00e2ncias registradas.</li> </ul>"},{"location":"anexoA/estagio1/#tabela-de-rotas-exemplo","title":"Tabela de rotas (exemplo)","text":"<ul> <li>Route Table (public): 0.0.0.0/0 \u2192 Internet Gateway (igw-xxxx).  </li> <li>Route Table (private): 0.0.0.0/0 \u2192 NAT Gateway (nat-xxxx) \u2014 permite que as inst\u00e2ncias privadas fa\u00e7am sa\u00eddas (patches, downloads).</li> </ul>"},{"location":"anexoA/estagio2/","title":"Est\u00e1gio 2","text":""},{"location":"anexoA/estagio2/#anexo-a","title":"Anexo A","text":""},{"location":"anexoA/estagio2/#estagio-2-upload-e-conversao-lambda-dynamodb-obj-2-e-3","title":"Est\u00e1gio 2 - Upload e Convers\u00e3o (Lambda + DynamoDB) (Obj. 2 e 3)","text":""},{"location":"anexoA/estagio2/#regular-2","title":"Regular (2)","text":"<p>O est\u00e1gio 2 tem como meta garantir que todo o pipeline de upload e processamento em nuvem funcione corretamente:</p> <ol> <li>O front-end ou navegador solicita ao backend uma URL pr\u00e9-assinada gerada pelo Amazon S3.</li> <li>O arquivo \u00e9 enviado diretamente ao bucket S3 usando essa URL.</li> <li>O evento <code>ObjectCreated</code> no bucket aciona a fun\u00e7\u00e3o AWS Lambda.</li> <li>A Lambda l\u00ea o objeto do S3, converte o conte\u00fado em Base64, e grava no DynamoDB.</li> </ol> <p>Esse fluxo comprova a integra\u00e7\u00e3o dos tr\u00eas servi\u00e7os principais: S3, Lambda e DynamoDB.</p>"},{"location":"anexoA/estagio2/#componentes-e-configuracoes","title":"Componentes e Configura\u00e7\u00f5es","text":""},{"location":"anexoA/estagio2/#amazon-s3","title":"Amazon S3","text":"<ul> <li>Bucket: <code>cloud25b-project</code></li> <li>Evento configurado: <code>ObjectCreated</code> \u2192 aciona a fun\u00e7\u00e3o Lambda <code>ImageBAse64Converter</code></li> <li>Permiss\u00f5es:</li> <li>Pol\u00edtica permite <code>s3:PutObject</code>, <code>s3:GetObject</code> e <code>s3:ListBucket</code></li> <li>Bloqueio de acesso p\u00fablico mantido ativo</li> </ul> <p>Evid\u00eancia \u2014 Evento configurado no S3</p> <p> Figura 1 \u2014 Configura\u00e7\u00e3o de evento <code>ObjectCreated</code> acionando a fun\u00e7\u00e3o Lambda.</p>"},{"location":"anexoA/estagio2/#aws-lambda-imagebase64converter","title":"AWS Lambda \u2014 ImageBAse64Converter","text":"<p>A fun\u00e7\u00e3o Lambda processa os uploads automaticamente:</p> Python <pre><code>import boto3\nimport base64\nfrom datetime import datetime\nimport urllib.parse\nimport math\nimport os\n\ns3 = boto3.client('s3')\ndynamodb = boto3.resource('dynamodb')\nTABLE_NAME = os.environ.get('IMAGES_TABLE', 'ImagesTable')\n\n# Tamanho m\u00e1ximo por chunk (em caracteres Base64). \n# Recomendo 300000-360000. N\u00e3o ultrapasse ~400000.\nCHUNK_SIZE = int(os.environ.get('CHUNK_SIZE', '350000'))\n\ntable = dynamodb.Table(TABLE_NAME)\n\ndef lambda_handler(event, context):\n    print(\"DEBUG - evento recebido:\", event)\n    for record in event.get('Records', []):\n        try:\n            bucket = record['s3']['bucket']['name']\n            key = urllib.parse.unquote_plus(record['s3']['object']['key'])\n            print(f\"DEBUG - Bucket: {bucket}, Key: {key}\")\n\n            if not key.startswith(\"uploads/\"):\n                print(f\"DEBUG - Ignorado, key fora do prefixo: {key}\")\n                continue\n\n            parts = key.split('/')\n            if len(parts) &lt; 3:\n                print(f\"DEBUG - Caminho inesperado: {key}\")\n                continue\n\n            userId = parts[1]\n            imageId = parts[-1]\n\n            # ler objeto do S3\n            resp = s3.get_object(Bucket=bucket, Key=key)\n            content = resp['Body'].read()\n            content_type = resp.get('ContentType', 'application/octet-stream')\n            size_bytes = resp.get('ContentLength', len(content))\n\n            # converter para base64 (string ASCII)\n            base64_str = base64.b64encode(content).decode('utf-8')\n            total_len = len(base64_str)\n            total_chunks = math.ceil(total_len / CHUNK_SIZE)\n            print(f\"DEBUG - base64_len={total_len}, CHUNK_SIZE={CHUNK_SIZE}, total_chunks={total_chunks}\")\n\n            # 1) gravar META item (usando imageId \"puro\")\n            meta_item = {\n                'userId': userId,\n                'imageId': imageId,          # item META usa imageId original\n                'createdAt': datetime.utcnow().isoformat(),\n                'contentType': content_type,\n                'sizeBytes': size_bytes,\n                'totalChunks': total_chunks,\n                'isMeta': True\n            }\n\n            table.put_item(Item=meta_item)\n            print(\"DEBUG - META gravado:\", {'userId': userId, 'imageId': imageId, 'totalChunks': total_chunks})\n\n            # 2) gravar CHUNKS usando batch_write (cada chunk tem imageId com sufixo para manter unicidade)\n            # ex.: imageId -&gt; \"foto.png\", chunk -&gt; \"foto.png#chunk#000001\"\n            with table.batch_writer() as batch:\n                for i in range(total_chunks):\n                    start = i * CHUNK_SIZE\n                    chunk_str = base64_str[start:start + CHUNK_SIZE]\n                    chunk_key = f\"{imageId}#chunk#{i:06d}\"\n                    item = {\n                        'userId': userId,\n                        'imageId': chunk_key,   # chunk tem imageId diferenciado\n                        'chunkIndex': i,\n                        'chunkLength': len(chunk_str),\n                        'data': chunk_str\n                    }\n                    batch.put_item(Item=item)\n                    # logs leves por chunk (n\u00e3o muito verbosos) \u2014 comente se gerar muito log\n                    print(f\"DEBUG - gravado chunk {i+1}/{total_chunks} (len={len(chunk_str)})\")\n\n            print(f\"\u2705 Conclu\u00eddo processamento imagem {imageId} do usu\u00e1rio {userId} ({total_chunks} chunks)\")\n\n            # opcional: deletar objeto bruto do S3 ap\u00f3s sucesso\n            # s3.delete_object(Bucket=bucket, Key=key)\n\n        except Exception as e:\n            print(f\"\u274c Erro ao processar {key}: {e}\", flush=True)\n            # opcional: re-raise para que Lambda registre falha\n            raise\n</code></pre> <ul> <li>Role IAM: <code>LambdaS3DynamoRole</code> com permiss\u00f5es restritas a <code>s3:GetObject</code> e <code>dynamodb:PutItem</code></li> </ul> <p>Evid\u00eancias \u2014 Execu\u00e7\u00e3o da Lambda</p> <p> Figura 2 \u2014 Configura\u00e7\u00e3o da fun\u00e7\u00e3o Lambda com trigger do S3 e permiss\u00f5es de execu\u00e7\u00e3o.</p> <p> Figura 3 \u2014 CloudWatch Logs mostrando execu\u00e7\u00e3o bem-sucedida do Lambda ap\u00f3s upload.</p>"},{"location":"anexoA/estagio2/#dynamodb-imagestable","title":"DynamoDB \u2014 ImagesTable","text":"<p>A tabela armazena os resultados da convers\u00e3o:</p> <p>Evid\u00eancia \u2014 Item criado no DynamoDB</p> <p> Figura 4 \u2014 Registro da imagem processada com campo Base64 gravado com sucesso.</p>"},{"location":"anexoA/estagio2/#api-backend","title":"API / Backend","text":"<p>O backend da aplica\u00e7\u00e3o \u00e9 uma API Express (Node.js) respons\u00e1vel por gerar URLs pr\u00e9-assinadas e interagir com o DynamoDB.</p>"},{"location":"anexoA/estagio2/#endpoint-principal-geracao-da-url-pre-assinada","title":"Endpoint principal \u2014 gera\u00e7\u00e3o da URL pr\u00e9-assinada","text":"<pre><code>app.post('/api/upload-url', async (req, res) =&gt; {\n  try {\n    const { filename, contentType, userId } = req.body;\n    if (!filename || !contentType || !userId) {\n      return res.status(400).json({ error: 'filename, contentType e userId s\u00e3o obrigat\u00f3rios' });\n    }\n\n    const key = `uploads/${userId}/${Date.now()}-${filename}`;\n    const params = {\n      Bucket: BUCKET_NAME,\n      Key: key,\n      Expires: 300,\n      ContentType: contentType,\n      ACL: 'bucket-owner-full-control'\n    };\n\n    const uploadUrl = await s3.getSignedUrlPromise('putObject', params);\n    res.json({ uploadUrl, objectKey: key });\n  } catch (err) {\n    console.error('Erro ao gerar URL pr\u00e9-assinada:', err);\n    res.status(500).json({ error: 'Erro ao gerar URL pr\u00e9-assinada' });\n  }\n});\n</code></pre> Evid\u00eancia \u2014 Gera\u00e7\u00e3o da URL Pr\u00e9-Assinada <p> Figura 5 \u2014 Backend retornando URL pr\u00e9-assinada para upload.</p>"},{"location":"anexoA/estagio2/#fluxo-completo-verificado","title":"Fluxo completo verificado","text":"<ol> <li>Backend gera URL pr\u00e9-assinada.</li> <li>Upload executado com sucesso no S3.</li> <li>Evento <code>ObjectCreated</code> dispara a fun\u00e7\u00e3o Lambda.</li> <li>Lambda converte o arquivo em Base64 e grava no DynamoDB.</li> <li>Logs no CloudWatch confirmam a execu\u00e7\u00e3o.</li> </ol>"},{"location":"anexoA/estagio2/#bom-3","title":"Bom (3)","text":"<p>\u2014 Metadados gravados (<code>contentType</code>, <code>sizeBytes</code>, <code>timestamps</code>); chunking implementado para imagens maiores; documenta\u00e7\u00e3o completa do fluxo com prints.</p>"},{"location":"anexoA/estagio2/#objetivo","title":"Objetivo","text":"<p>Nesta etapa, o sistema foi aprimorado para lidar com arquivos grandes que excedem o limite de 350 KB por item no DynamoDB. A solu\u00e7\u00e3o divide automaticamente o arquivo em m\u00faltiplos chunks (partes menores) e armazena cada parte em um item separado, mantendo um item META com os metadados gerais da imagem.</p>"},{"location":"anexoA/estagio2/#fluxo-geral-com-chunking","title":"Fluxo geral (com chunking)","text":"<pre><code>sequenceDiagram\n    participant User as Usu\u00e1rio (Browser)\n    participant API as Backend / API (EC2)\n    participant S3 as Amazon S3\n    participant Lambda as AWS Lambda\n    participant DB as DynamoDB\n\n    User-&gt;&gt;API: POST /api/upload-url (solicita URL pr\u00e9-assinada)\n    API--&gt;&gt;User: Retorna URL PUT (S3)\n    User-&gt;&gt;S3: PUT (upload da imagem)\n    S3--&gt;&gt;Lambda: Evento ObjectCreated\n    Lambda-&gt;&gt;S3: GetObject\n    Lambda-&gt;&gt;Lambda: Divide arquivo em chunks de at\u00e9 350 KB\n    loop para cada chunk\n        Lambda-&gt;&gt;DB: PutItem (chunk_i)\n    end\n    Lambda-&gt;&gt;DB: PutItem (item META com metadados gerais)\n    DB--&gt;&gt;Lambda: Confirma inser\u00e7\u00f5es\n    Lambda--&gt;&gt;CloudWatch: Loga quantidade de chunks e total de bytes</code></pre>"},{"location":"anexoA/estagio2/#implementacao-do-chunking-na-lambda","title":"Implementa\u00e7\u00e3o do Chunking na Lambda","text":"<p>A fun\u00e7\u00e3o Lambda foi aprimorada para: - Calcular o tamanho do objeto (<code>sizeBytes</code>) - Converter o bin\u00e1rio em Base64 - Dividir o conte\u00fado em blocos de 350 KB (<code>chunk_000001</code>, <code>chunk_000002</code>, ...) - Criar um item <code>META</code> no DynamoDB com metadados do arquivo (tamanho total, tipo, n\u00famero de chunks, timestamp)</p> Python <pre><code>import boto3\nimport base64\nfrom datetime import datetime\nimport urllib.parse\nimport math\nimport os\n\ns3 = boto3.client('s3')\ndynamodb = boto3.resource('dynamodb')\nTABLE_NAME = os.environ.get('IMAGES_TABLE', 'ImagesTable')\n\n# Tamanho m\u00e1ximo por chunk (em caracteres Base64). \n# Recomendo 300000-360000. N\u00e3o ultrapasse ~400000.\nCHUNK_SIZE = int(os.environ.get('CHUNK_SIZE', '350000'))\n\ntable = dynamodb.Table(TABLE_NAME)\n\ndef lambda_handler(event, context):\n    print(\"DEBUG - evento recebido:\", event)\n    for record in event.get('Records', []):\n        try:\n            bucket = record['s3']['bucket']['name']\n            key = urllib.parse.unquote_plus(record['s3']['object']['key'])\n            print(f\"DEBUG - Bucket: {bucket}, Key: {key}\")\n\n            if not key.startswith(\"uploads/\"):\n                print(f\"DEBUG - Ignorado, key fora do prefixo: {key}\")\n                continue\n\n            parts = key.split('/')\n            if len(parts) &lt; 3:\n                print(f\"DEBUG - Caminho inesperado: {key}\")\n                continue\n\n            userId = parts[1]\n            imageId = parts[-1]\n\n            # ler objeto do S3\n            resp = s3.get_object(Bucket=bucket, Key=key)\n            content = resp['Body'].read()\n            content_type = resp.get('ContentType', 'application/octet-stream')\n            size_bytes = resp.get('ContentLength', len(content))\n\n            # converter para base64 (string ASCII)\n            base64_str = base64.b64encode(content).decode('utf-8')\n            total_len = len(base64_str)\n            total_chunks = math.ceil(total_len / CHUNK_SIZE)\n            print(f\"DEBUG - base64_len={total_len}, CHUNK_SIZE={CHUNK_SIZE}, total_chunks={total_chunks}\")\n\n            # 1) gravar META item (usando imageId \"puro\")\n            meta_item = {\n                'userId': userId,\n                'imageId': imageId,          # item META usa imageId original\n                'createdAt': datetime.utcnow().isoformat(),\n                'contentType': content_type,\n                'sizeBytes': size_bytes,\n                'totalChunks': total_chunks,\n                'isMeta': True\n            }\n\n            table.put_item(Item=meta_item)\n            print(\"DEBUG - META gravado:\", {'userId': userId, 'imageId': imageId, 'totalChunks': total_chunks})\n\n            # 2) gravar CHUNKS usando batch_write (cada chunk tem imageId com sufixo para manter unicidade)\n            # ex.: imageId -&gt; \"foto.png\", chunk -&gt; \"foto.png#chunk#000001\"\n            with table.batch_writer() as batch:\n                for i in range(total_chunks):\n                    start = i * CHUNK_SIZE\n                    chunk_str = base64_str[start:start + CHUNK_SIZE]\n                    chunk_key = f\"{imageId}#chunk#{i:06d}\"\n                    item = {\n                        'userId': userId,\n                        'imageId': chunk_key,   # chunk tem imageId diferenciado\n                        'chunkIndex': i,\n                        'chunkLength': len(chunk_str),\n                        'data': chunk_str\n                    }\n                    batch.put_item(Item=item)\n                    # logs leves por chunk (n\u00e3o muito verbosos) \u2014 comente se gerar muito log\n                    print(f\"DEBUG - gravado chunk {i+1}/{total_chunks} (len={len(chunk_str)})\")\n\n            print(f\"\u2705 Conclu\u00eddo processamento imagem {imageId} do usu\u00e1rio {userId} ({total_chunks} chunks)\")\n\n            # opcional: deletar objeto bruto do S3 ap\u00f3s sucesso\n            # s3.delete_object(Bucket=bucket, Key=key)\n\n        except Exception as e:\n            print(f\"\u274c Erro ao processar {key}: {e}\", flush=True)\n            # opcional: re-raise para que Lambda registre falha\n            raise\n</code></pre>"},{"location":"anexoA/estagio2/#estrutura-dos-itens-no-dynamodb","title":"Estrutura dos Itens no DynamoDB","text":"<p>Evid\u00eancia \u2014 Itens criados com chunking</p> <p> Figura 1 \u2014 Itens <code>META</code> e <code>000000...</code> criados no DynamoDB ap\u00f3s o processamento de um arquivo grande.</p>"},{"location":"anexoA/estagio2/#calculo-e-limites","title":"C\u00e1lculo e limites","text":"<ul> <li>Cada item DynamoDB suporta at\u00e9 400 KB (limite m\u00e1ximo).  </li> <li>Com chunk de 350 KB, garantimos seguran\u00e7a contra estouro.</li> <li>O n\u00famero de chunks \u00e9 calculado por:  </li> </ul> <p>Evid\u00eancia \u2014 Logs no CloudWatch mostrando c\u00e1lculo dos chunks</p> <p> Figura 2 \u2014 Lambda registrando quantidade total de chunks, bytes e timestamps no CloudWatch.</p>"},{"location":"anexoA/estagio3/","title":"Est\u00e1gio 3","text":""},{"location":"anexoA/estagio3/#anexo-a","title":"Anexo A","text":""},{"location":"anexoA/estagio3/#estagio-3-area-de-clientes-escalabilidade-obj-3","title":"Est\u00e1gio 3 - \u00c1rea de Clientes + Escalabilidade (Obj. 3)","text":""},{"location":"anexoA/estagio3/#regular-2","title":"Regular (2)","text":"<p>Nesta etapa o foco \u00e9 validar o funcionamento completo da \u00c1rea de Clientes, garantindo que ela esteja acess\u00edvel publicamente via ALB e que consiga consultar as imagens armazenadas no DynamoDB atrav\u00e9s do backend hospedado na EC2.</p>"},{"location":"anexoA/estagio3/#objetivo","title":"Objetivo","text":"<ul> <li>Tornar o front-end da \u00e1rea de clientes acess\u00edvel pelo dom\u00ednio do Application Load Balancer (ALB).  </li> <li>Permitir que o usu\u00e1rio consulte as imagens do seu <code>userId</code>.  </li> <li>Implementar o endpoint <code>GET /api/images/:id</code> para retornar o conte\u00fado em Base64 de uma imagem espec\u00edfica.  </li> </ul> <p>Essa etapa comprova que a aplica\u00e7\u00e3o \u00e9 funcional, acess\u00edvel e escal\u00e1vel, com comunica\u00e7\u00e3o entre front-end, ALB, backend e banco DynamoDB.</p>"},{"location":"anexoA/estagio3/#configuracao-do-alb","title":"Configura\u00e7\u00e3o do ALB","text":"<ul> <li>DNS p\u00fablico: <code>http://alb-cloud25d-1290402490.us-east-1.elb.amazonaws.com</code> </li> <li>Listener: Porta 80 (HTTP) direcionando para o Target Group <code>cloud25b-target</code>.  </li> <li>Health check: <code>/health</code> (resposta HTTP 200 OK).</li> </ul> <p>Evid\u00eancia \u2014 ALB Ativo</p> <p> Figura 1 \u2014 ALB ativo na regi\u00e3o us-east-1, com listener HTTP e target group saud\u00e1vel.</p>"},{"location":"anexoA/estagio3/#backend-endpoints-principais","title":"Backend \u2014 Endpoints principais","text":"<p>O backend implementa endpoints REST, conforme especificado no <code>server.js</code>:</p> <pre><code>// Retorna lista de imagens de um usu\u00e1rio\nGET /api/images?userId=&lt;id&gt;\n\n// Retorna o Base64 de uma imagem espec\u00edfica\nGET /api/images/:id?userId=&lt;id&gt;\n</code></pre> <p>Evid\u00eancia \u2014 Resposta do endpoint</p> <p> Figura 2 \u2014 Resposta JSON do endpoint /api/images/:id, contendo o Base64 da imagem e o contentType.</p>"},{"location":"anexoA/estagio3/#front-end-area-de-clientes","title":"Front-end \u2014 \u00c1rea de Clientes","text":"<p>A interface da \u00e1rea de clientes agora permite: - Inserir o <code>userId</code> e listar as imagens dispon\u00edveis. - Selecionar uma imagem e visualizar seu conte\u00fado (convertido de Base64).</p> <p>Trecho JS respons\u00e1vel por consumir a API: </p><pre><code>async function fetchImageById(userId, imageId) {\n  const response = await fetch(`/api/images/${imageId}?userId=${userId}`);\n  const data = await response.json();\n  console.log('Imagem Base64:', data.base64);\n  const img = document.getElementById('preview');\n  img.src = `data:${data.contentType};base64,${data.base64}`;\n}\n</code></pre><p></p> <p>Evid\u00eancia \u2014 P\u00e1gina da \u00c1rea de Clientes carregando imagens</p> <p> Figura 3 \u2014 P\u00e1gina da \u00e1rea de clientes listando imagens e exibindo preview via Base64.</p>"},{"location":"anexoA/estagio3/#seguranca-e-rede","title":"Seguran\u00e7a e Rede","text":"<ul> <li>Security Group da EC2: permite tr\u00e1fego HTTP (porta 80/3000) apenas do SG do ALB.  </li> <li>Health check: configurado no Target Group para <code>/health</code> (status 200).  </li> <li>CORS habilitado no backend para permitir chamadas do front-end hospedado via ALB.  </li> </ul>"},{"location":"anexoA/estagio3/#bom-3","title":"Bom (3)","text":"<p>Nesta etapa, o foco \u00e9 garantir que a \u00e1rea de clientes esteja operando de forma escal\u00e1vel e resiliente, utilizando os recursos do Application Load Balancer (ALB) e do Auto Scaling Group (ASG) da AWS.</p> <p>O objetivo \u00e9 que a aplica\u00e7\u00e3o se mantenha dispon\u00edvel mesmo com varia\u00e7\u00f5es de carga ou falhas em inst\u00e2ncias individuais, assegurando o balanceamento autom\u00e1tico e o monitoramento da sa\u00fade das inst\u00e2ncias.</p>"},{"location":"anexoA/estagio3/#componentes-e-configuracoes","title":"Componentes e Configura\u00e7\u00f5es","text":""},{"location":"anexoA/estagio3/#application-load-balancer-alb","title":"Application Load Balancer (ALB)","text":"<p>O ALB \u00e9 respons\u00e1vel por distribuir as requisi\u00e7\u00f5es HTTP/HTTPS entre as inst\u00e2ncias EC2 do ASG.</p> <ul> <li>Listeners configurados:</li> <li>Porta 80 (HTTP) redirecionando para 443 (HTTPS).</li> <li>Porta 443 (HTTPS) com certificado ACM v\u00e1lido configurado.</li> <li>Target Group: associado ao ASG, com health check configurado para rota <code>/health</code>.</li> <li>Protocolos: HTTP/2 habilitado; forward para targets em v\u00e1rias AZs.</li> </ul> <p>Evid\u00eancia \u2014 Listener HTTPS com ACM </p> <p> Figura 1 \u2014 Configura\u00e7\u00e3o do listener 443 com certificado ACM ativo.</p>"},{"location":"anexoA/estagio3/#auto-scaling-group-asg","title":"Auto Scaling Group (ASG)","text":"<p>O ASG garante que o n\u00famero de inst\u00e2ncias EC2 atenda \u00e0 demanda, mantendo disponibilidade e desempenho adequados.</p> <ul> <li>Configura\u00e7\u00e3o principal:</li> <li>M\u00ednimo: 2 inst\u00e2ncias</li> <li>M\u00e1ximo: 4 inst\u00e2ncias</li> </ul> <p>Evid\u00eancia \u2014 Gr\u00e1fico de Desired x InService </p> <p> Figura 2 \u2014 M\u00e9tricas do ASG mostrando inst\u00e2ncias desejadas e em servi\u00e7o.</p>"},{"location":"anexoA/estagio3/#health-checks","title":"Health Checks","text":"<p>Os health checks s\u00e3o configurados para verificar periodicamente a rota <code>/health</code> exposta pela aplica\u00e7\u00e3o Node.js no EC2.</p> <ul> <li>Intervalo: 30 segundos  </li> <li>Threshold: 2 consecutivos para sucesso/falha  </li> <li>Resposta esperada: HTTP 200</li> </ul> <p>Evid\u00eancia \u2014 Target Health </p> <p> Figura 3 \u2014 Targets do ALB marcados como saud\u00e1veis (verde) em m\u00faltiplas zonas de disponibilidade.</p>"},{"location":"anexoA/estagio3/#fluxo-geral-de-escalabilidade","title":"Fluxo Geral de Escalabilidade","text":"<pre><code>sequenceDiagram\n    participant User as Usu\u00e1rio (Browser)\n    participant ALB as Application Load Balancer\n    participant EC2 as Inst\u00e2ncias EC2 (ASG)\n\n    User-&gt;&gt;ALB: Requisi\u00e7\u00e3o HTTPS (porta 443)\n    ALB--&gt;&gt;EC2: Redireciona para inst\u00e2ncia saud\u00e1vel\n    EC2--&gt;&gt;ALB: Retorna resposta HTTP 200\n    ALB--&gt;&gt;User: Entrega resposta ao cliente\n    Note over EC2: Caso CPU &gt; 50%, ASG aciona nova inst\u00e2ncia\n    Note over EC2: Caso CPU &lt; 20% por tempo prolongado, inst\u00e2ncia \u00e9 encerrada (graceful shutdown)</code></pre>"},{"location":"anexoA/estagio4/","title":"Est\u00e1gio 4","text":""},{"location":"anexoA/estagio4/#anexo-a","title":"Anexo A","text":""},{"location":"anexoA/estagio4/#estagio-4-projeto-avancado-seguranca-sla-e-custo-obj-4","title":"Est\u00e1gio 4 \u2014 Projeto Avan\u00e7ado (Seguran\u00e7a, SLA e Custo) (Obj. 4)","text":""},{"location":"anexoA/estagio4/#regular-2","title":"Regular (2)","text":"<p>O Est\u00e1gio 4 tem como objetivo consolidar toda a infraestrutura e os componentes do projeto, apresentando um relat\u00f3rio final que descreve as decis\u00f5es de arquitetura, as pr\u00e1ticas de seguran\u00e7a aplicadas e uma vis\u00e3o de custo e disponibilidade dos servi\u00e7os utilizados.</p> <p>Nesta fase, s\u00e3o avaliadas as boas pr\u00e1ticas de seguran\u00e7a, organiza\u00e7\u00e3o de recursos, uso eficiente dos servi\u00e7os AWS e a comunica\u00e7\u00e3o clara da arquitetura final do sistema.</p>"},{"location":"anexoA/estagio4/#arquitetura-geral","title":"Arquitetura Geral","text":"<p>A arquitetura final do sistema est\u00e1 baseada em servi\u00e7os totalmente gerenciados pela AWS, visando escalabilidade, alta disponibilidade e seguran\u00e7a. O diagrama geral abaixo ilustra a integra\u00e7\u00e3o dos componentes principais:</p> <p> </p>"},{"location":"anexoA/estagio4/#escolhas-de-servicos-e-justificativas","title":"Escolhas de Servi\u00e7os e Justificativas","text":"Componente Fun\u00e7\u00e3o no Sistema Justificativa de Uso Amazon S3 Armazenamento de arquivos est\u00e1ticos (site institucional) e uploads de imagens Alta durabilidade, baixo custo e integra\u00e7\u00e3o nativa com Lambda AWS Lambda Convers\u00e3o autom\u00e1tica de imagens em Base64 e grava\u00e7\u00e3o no DynamoDB Execu\u00e7\u00e3o serverless e escalabilidade autom\u00e1tica, sem custo ocioso Amazon DynamoDB Armazenamento dos metadados e Base64 das imagens Banco NoSQL totalmente gerenciado, otimizado para alta disponibilidade Amazon EC2 (ASG) Hospedagem da \u00e1rea de clientes e API Permite inst\u00e2ncias din\u00e2micas conforme demanda, com controle de custo Application Load Balancer (ALB) Balanceamento de carga e roteamento HTTPS Garantia de distribui\u00e7\u00e3o uniforme, integra\u00e7\u00e3o com ACM para HTTPS AWS Certificate Manager (ACM) Emiss\u00e3o de certificado TLS interno Criptografia de tr\u00e1fego HTTPS sem custo adicional"},{"location":"anexoA/estagio4/#politicas-de-seguranca-aplicadas","title":"Pol\u00edticas de Seguran\u00e7a Aplicadas","text":"<ol> <li>Security Groups Restritos:</li> <li>O SG do ALB permite apenas porta 80 (HTTP) e 443 (HTTPS) de entrada p\u00fablica.</li> <li> <p>O SG das inst\u00e2ncias EC2 aceita tr\u00e1fego somente do SG do ALB, refor\u00e7ando o isolamento interno.</p> </li> <li> <p>IAM Roles e Permiss\u00f5es M\u00ednimas:</p> </li> <li>LambdaS3DynamoRole: permiss\u00f5es limitadas a <code>s3:GetObject</code> e <code>dynamodb:PutItem</code>.</li> <li> <p>EC2-ImageApp-Role: acesso controlado apenas aos recursos necess\u00e1rios (S3, DynamoDB e CloudWatch Logs).</p> </li> <li> <p>HTTPS Ativo via ACM:</p> </li> <li>Certificado privado <code>projeto-cloud25b.local</code> instalado no Listener 443 do ALB.</li> <li> <p>Tr\u00e1fego entre cliente e load balancer criptografado (TLS 1.2+).</p> </li> <li> <p>Buckets S3 Privados:</p> </li> <li>Uploads via URL pr\u00e9-assinada, garantindo seguran\u00e7a e controle de acesso tempor\u00e1rio.</li> </ol>"},{"location":"anexoA/estagio4/#aspectos-de-custo-e-disponibilidade","title":"Aspectos de Custo e Disponibilidade","text":"<p>O projeto foi desenvolvido com base em servi\u00e7os de baixo custo e escalabilidade autom\u00e1tica:</p> <ul> <li>EC2 (ASG): inst\u00e2ncias t3.micro sob demanda, ajustando a capacidade conforme CPU &gt; 50%.</li> <li>Lambda: modelo pay-per-use, sem custo fixo quando inativo.</li> <li>DynamoDB: modo On-Demand, elimina necessidade de provisionamento de throughput.</li> <li>S3: custo pr\u00f3ximo a US$ 0.023/GB/m\u00eas, apenas para armazenamento de objetos.</li> </ul> <p>Evid\u00eancia \u2014 AWS Pricing Calculator</p> <p> Figura 3 \u2014 Estimativa de custo mensal gerado via AWS Pricing Calculator, contemplando EC2, S3, DynamoDB e Lambda.</p>"},{"location":"anexoA/estagio4/#consideracoes-de-sla-e-resiliencia","title":"Considera\u00e7\u00f5es de SLA e Resili\u00eancia","text":"Servi\u00e7o SLA Oficial AWS Justificativa S3 99.99% de disponibilidade Garantia de durabilidade de 11 9s e replicac\u00e3o entre AZs Lambda 99.95% Alta resili\u00eancia por execu\u00e7\u00e3o distribu\u00edda DynamoDB 99.999% Multi-AZ e replicado automaticamente EC2 + ASG 99.99% Escalabilidade e substitui\u00e7\u00e3o autom\u00e1tica de inst\u00e2ncias com falha ALB 99.99% Balanceamento autom\u00e1tico entre m\u00faltiplas zonas"},{"location":"anexoB/1-introducao/","title":"Introdu\u00e7\u00e3o","text":""},{"location":"anexoB/1-introducao/#plano-de-disaster-recovery-e-cloud-exit","title":"Plano de Disaster Recovery e Cloud Exit","text":""},{"location":"anexoB/1-introducao/#visao-geral-executiva","title":"Vis\u00e3o Geral Executiva","text":"<p>Este documento apresenta o Plano Oficial de Disaster Recovery (DR) e Cloud Exit da plataforma de convers\u00e3o de imagens desenvolvida pela Demay's Infra Company, atualmente hospedada na Amazon Web Services (AWS).</p>"},{"location":"anexoB/1-introducao/#contexto","title":"Contexto","text":"<p>A plataforma permite que usu\u00e1rios fa\u00e7am upload de imagens, que s\u00e3o automaticamente convertidas para formato Base64 e armazenadas para recupera\u00e7\u00e3o posterior. Embora a AWS ofere\u00e7a alta disponibilidade, este plano garante continuidade do neg\u00f3cio em cen\u00e1rios cr\u00edticos:</p> <ul> <li>Falha regional prolongada da AWS</li> <li>Decis\u00e3o estrat\u00e9gica de mudan\u00e7a de provedor</li> <li>Exig\u00eancias regulat\u00f3rias ou contratuais</li> <li>Otimiza\u00e7\u00e3o de custos de longo prazo</li> </ul>"},{"location":"anexoB/1-introducao/#escopo-do-plano","title":"Escopo do Plano","text":"<p>Este plano documenta a migra\u00e7\u00e3o completa da solu\u00e7\u00e3o AWS para Microsoft Azure, incluindo:</p> <ul> <li>Todos os componentes da arquitetura (S3, Lambda, DynamoDB, EC2, ALB)</li> <li>Dados em repouso (imagens e metadados)</li> <li>Configura\u00e7\u00f5es de rede, seguran\u00e7a e identidade</li> <li>Procedimentos operacionais e testes de valida\u00e7\u00e3o</li> </ul>"},{"location":"anexoB/1-introducao/#estrategia-escolhida-warm-standby","title":"Estrat\u00e9gia Escolhida: Warm Standby","text":"<p>Adotamos a estrat\u00e9gia Warm Standby por oferecer o melhor equil\u00edbrio entre custo e tempo de recupera\u00e7\u00e3o:</p> Crit\u00e9rio Cold Standby Warm Standby Active-Active RTO 6-24 horas 2-4 horas &lt; 1 minuto RPO 24-48 horas 4-24 horas Near-zero Custo mensal $20-30 $50-100 $800-1200 Complexidade Baixa M\u00e9dia Alta <p>Justificativa: Para um projeto piloto com tr\u00e1fego moderado (50-100 req/h), um RTO de 2-4 horas \u00e9 aceit\u00e1vel e o custo de $50-100/m\u00eas em standby cabe no or\u00e7amento, enquanto Active-Active seria super-dimensionado.</p>"},{"location":"anexoB/1-introducao/#objetivos-de-recuperacao","title":"Objetivos de Recupera\u00e7\u00e3o","text":"Componente RTO RPO Criticidade Site Est\u00e1tico (S3) 30 min 24h M\u00e9dia API/\u00c1rea Clientes (EC2) 2h 24h Alta Convers\u00e3o (Lambda) 1h N/A Alta Dados (DynamoDB) 2h 24h Cr\u00edtica Balanceador (ALB) 1h N/A Alta DNS/Certificados 30 min N/A Cr\u00edtica"},{"location":"anexoB/1-introducao/#estrutura-do-documento","title":"Estrutura do Documento","text":"<ol> <li>Objetivos e Estrat\u00e9gia - RTO/RPO detalhados e cen\u00e1rios de falha</li> <li>Mapeamento de Servi\u00e7os - Equival\u00eancias AWS \u2194 Azure</li> <li>Procedimentos e Runbooks - Passo a passo de ativa\u00e7\u00e3o</li> <li>Rede, Seguran\u00e7a e Identidade - Configura\u00e7\u00f5es t\u00e9cnicas</li> <li>Custos - Estimativas financeiras e operacionais</li> <li>Valida\u00e7\u00e3o e Testes - Plano de testes de DR</li> <li>Riscos e Compliance - An\u00e1lise de riscos e LGPD</li> <li>Cronograma e Respons\u00e1veis - Timeline e matriz RACI</li> </ol>"},{"location":"anexoB/2-objetivo/","title":"Objetivos e Estrat\u00e9gia","text":""},{"location":"anexoB/2-objetivo/#1-objetivos-e-estrategia-de-dr","title":"1. Objetivos e Estrat\u00e9gia de DR","text":""},{"location":"anexoB/2-objetivo/#11-objetivos-de-recuperacao-por-servico","title":"1.1 Objetivos de Recupera\u00e7\u00e3o por Servi\u00e7o","text":""},{"location":"anexoB/2-objetivo/#111-site-estatico-s3-azure-blob-storage","title":"1.1.1 Site Est\u00e1tico (S3 \u2192 Azure Blob Storage)","text":"<p>RTO: 30 minutos RPO: 24 horas Criticidade: M\u00e9dia</p> <p>Justificativa do RTO: O site institucional \u00e9 principalmente informativo. Uma indisponibilidade de 30 minutos \u00e9 aceit\u00e1vel, pois n\u00e3o impacta diretamente o processamento de imagens. A recupera\u00e7\u00e3o \u00e9 r\u00e1pida via sincroniza\u00e7\u00e3o de blobs.</p> <p>Justificativa do RPO: Conte\u00fado est\u00e1tico muda raramente (p\u00e1ginas institucionais). Sincroniza\u00e7\u00e3o di\u00e1ria \u00e9 suficiente. Eventual perda de at\u00e9 24h n\u00e3o compromete a opera\u00e7\u00e3o.</p> <p>Estrat\u00e9gia: Sincroniza\u00e7\u00e3o automatizada di\u00e1ria via AzCopy, com versionamento habilitado.</p>"},{"location":"anexoB/2-objetivo/#112-funcao-de-conversao-lambda-azure-functions","title":"1.1.2 Fun\u00e7\u00e3o de Convers\u00e3o (Lambda \u2192 Azure Functions)","text":"<p>RTO: 1 hora RPO: N/A (stateless) Criticidade: Alta</p> <p>Justificativa do RTO: A fun\u00e7\u00e3o \u00e9 cr\u00edtica para o core business. 1 hora permite deployment validado e testado da Azure Function, sem precipita\u00e7\u00e3o que cause erros.</p> <p>Justificativa do RPO: Fun\u00e7\u00f5es s\u00e3o stateless (c\u00f3digo versionado em Git). N\u00e3o h\u00e1 perda de dados, apenas necessidade de redeployment.</p> <p>Estrat\u00e9gia: C\u00f3digo mantido em reposit\u00f3rio Git. Infraestrutura como c\u00f3digo (Terraform/ARM) para provisionamento r\u00e1pido. Azure Function App em modo Consumption pr\u00e9-configurada (scaled to zero).</p>"},{"location":"anexoB/2-objetivo/#113-banco-de-dados-dynamodb-cosmos-db","title":"1.1.3 Banco de Dados (DynamoDB \u2192 Cosmos DB)","text":"<p>RTO: 2 horas RPO: 24 horas Criticidade: Cr\u00edtica</p> <p>Justificativa do RTO: \u00c9 o componente mais cr\u00edtico (cont\u00e9m todos os metadados e Base64). 2 horas permitem restaura\u00e7\u00e3o completa e valida\u00e7\u00e3o de integridade dos dados.</p> <p>Justificativa do RPO: Backup di\u00e1rio via Export do DynamoDB para S3, com c\u00f3pia para Azure Blob. Perda de at\u00e9 24h de uploads \u00e9 aceit\u00e1vel para um projeto piloto, considerando que o volume \u00e9 baixo (5-10 uploads/dia).</p> <p>Estrat\u00e9gia:  - Backups di\u00e1rios automatizados (DynamoDB Export \u2192 S3 \u2192 Azure Blob) - Scripts de transforma\u00e7\u00e3o de dados (DynamoDB JSON \u2192 Cosmos DB JSON) - Cosmos DB pr\u00e9-provisionado com 400 RU/s (scaled down)</p>"},{"location":"anexoB/2-objetivo/#114-apiarea-de-clientes-ec2asg-azure-vmvmss","title":"1.1.4 API/\u00c1rea de Clientes (EC2/ASG \u2192 Azure VM/VMSS)","text":"<p>RTO: 2 horas RPO: 24 horas (c\u00f3digo) Criticidade: Alta</p> <p>Justificativa do RTO: A API \u00e9 a interface principal dos clientes. 2 horas incluem: provisionamento de VMs, deployment da aplica\u00e7\u00e3o, configura\u00e7\u00e3o do Load Balancer e testes de fuma\u00e7a.</p> <p>Justificativa do RPO: C\u00f3digo versionado em Git (sem perda). Configura\u00e7\u00e3o de ambiente via vari\u00e1veis. Eventual necessidade de reconfigurar vari\u00e1veis de ambiente (conex\u00f5es, secrets) em caso de drift n\u00e3o versionado.</p> <p>Estrat\u00e9gia:  - Imagens de VM pr\u00e9-buildadas (golden image) com aplica\u00e7\u00e3o - VM Scale Set pr\u00e9-configurado (0 inst\u00e2ncias em standby) - Scripts de inicializa\u00e7\u00e3o automatizados</p>"},{"location":"anexoB/2-objetivo/#115-balanceador-de-carga-alb-azure-load-balancer","title":"1.1.5 Balanceador de Carga (ALB \u2192 Azure Load Balancer)","text":"<p>RTO: 1 hora RPO: N/A Criticidade: Alta</p> <p>Justificativa do RTO: Componente de entrada. Configura\u00e7\u00e3o via IaC permite provisionamento e valida\u00e7\u00e3o em ~1 hora, incluindo testes de health checks.</p> <p>Estrat\u00e9gia: Terraform/ARM templates versionados. Azure Load Balancer Standard pr\u00e9-provisionado com backend pool vazio.</p>"},{"location":"anexoB/2-objetivo/#116-dns-e-certificados-tls","title":"1.1.6 DNS e Certificados TLS","text":"<p>RTO: 30 minutos RPO: N/A Criticidade: Cr\u00edtica</p> <p>Justificativa do RTO: Mudan\u00e7a de DNS (TTL baixo de 300s) + valida\u00e7\u00e3o de certificado. \u00c9 o ponto de entrada de todo tr\u00e1fego.</p> <p>Justificativa do RPO: Registros DNS e certificados s\u00e3o configura\u00e7\u00f5es, n\u00e3o dados. Certificados gerenciados (AWS ACM \u2192 Azure Key Vault) s\u00e3o emitidos sob demanda.</p> <p>Estrat\u00e9gia:  - DNS com TTL de 5 minutos (facilita cutover) - Certificados wildcard pr\u00e9-emitidos no Azure Key Vault - Runbook de cutover de DNS testado</p>"},{"location":"anexoB/2-objetivo/#12-cenarios-de-falha-considerados","title":"1.2 Cen\u00e1rios de Falha Considerados","text":""},{"location":"anexoB/2-objetivo/#cenario-1-indisponibilidade-regional-da-aws","title":"Cen\u00e1rio 1: Indisponibilidade Regional da AWS","text":"<p>Descri\u00e7\u00e3o: Uma regi\u00e3o inteira da AWS (ex: us-east-1) fica indispon\u00edvel por mais de 4 horas devido a falha catastr\u00f3fica.</p> <p>Probabilidade: Baixa (hist\u00f3rico: ~1-2x por d\u00e9cada) Impacto: Cr\u00edtico (100% de indisponibilidade) Decis\u00e3o de ativa\u00e7\u00e3o: Ap\u00f3s 4h de downtime confirmado pela AWS ou quando AWS declarar ETA &gt; 8h</p> <p>Resposta: 1. Ativar plano de DR (se\u00e7\u00e3o 3) 2. Sincronizar \u00faltimos backups dispon\u00edveis 3. Provisionar recursos no Azure (scale-up do Warm Standby) 4. Validar integridade dos dados 5. Cutover de DNS para Azure 6. Monitorar e validar opera\u00e7\u00e3o</p>"},{"location":"anexoB/2-objetivo/#cenario-2-falha-prolongada-de-servico-especifico","title":"Cen\u00e1rio 2: Falha Prolongada de Servi\u00e7o Espec\u00edfico","text":"<p>Descri\u00e7\u00e3o: Um servi\u00e7o espec\u00edfico (ex: Lambda, DynamoDB) apresenta degrada\u00e7\u00e3o severa (&gt;50% de erro) por mais de 2 horas, sem previs\u00e3o de resolu\u00e7\u00e3o.</p> <p>Probabilidade: M\u00e9dia-Baixa Impacto: Alto (componente cr\u00edtico indispon\u00edvel) Decis\u00e3o de ativa\u00e7\u00e3o: Ap\u00f3s 2h de degrada\u00e7\u00e3o severa ou quando AWS declarar impacto prolongado</p> <p>Resposta: 1. Avaliar se migra\u00e7\u00e3o parcial \u00e9 vi\u00e1vel (ex: apenas Lambda \u2192 Azure Functions) 2. Se invi\u00e1vel, ativar DR completo 3. Priorizar restaura\u00e7\u00e3o do componente cr\u00edtico 4. Operar temporariamente com funcionalidades degradadas se necess\u00e1rio</p>"},{"location":"anexoB/2-objetivo/#cenario-3-decisao-estrategica-de-saida","title":"Cen\u00e1rio 3: Decis\u00e3o Estrat\u00e9gica de Sa\u00edda","text":"<p>Descri\u00e7\u00e3o: Decis\u00e3o de neg\u00f3cio para migrar permanentemente para Azure (custos, estrat\u00e9gia multi-cloud, aquisi\u00e7\u00e3o, etc.)</p> <p>Probabilidade: M\u00e9dia (decis\u00e3o de neg\u00f3cio) Impacto: Nenhum (planejado) Decis\u00e3o de ativa\u00e7\u00e3o: Planejada com anteced\u00eancia m\u00ednima de 2 semanas</p> <p>Resposta: 1. Executar migra\u00e7\u00e3o planejada (blue-green deployment) 2. Sincronizar dados em modo de manuten\u00e7\u00e3o (minimizar RPO para &lt; 1h) 3. Validar completamente no Azure antes do cutover 4. Executar cutover gradual (% do tr\u00e1fego) 5. Monitorar por 48h antes de desprovisionar AWS 6. Manter AWS em standby por 1 semana ap\u00f3s cutover</p>"},{"location":"anexoB/2-objetivo/#cenario-4-exigencia-regulatoria-ou-compliance","title":"Cen\u00e1rio 4: Exig\u00eancia Regulat\u00f3ria ou Compliance","text":"<p>Descri\u00e7\u00e3o: Nova regulamenta\u00e7\u00e3o exige que dados sejam armazenados em regi\u00e3o/provedor espec\u00edfico (ex: LGPD, soberania digital).</p> <p>Probabilidade: Baixa-M\u00e9dia Impacto: Cr\u00edtico (bloqueio legal) Decis\u00e3o de ativa\u00e7\u00e3o: Conforme timeline legal (geralmente 30-90 dias)</p> <p>Resposta: 1. Avaliar requirements legais (data residency, certifica\u00e7\u00f5es) 2. Validar compliance do Azure (Azure Brazil South, ISO 27001, etc.) 3. Executar migra\u00e7\u00e3o planejada com valida\u00e7\u00e3o jur\u00eddica 4. Documentar chain of custody dos dados 5. Obter atesta\u00e7\u00e3o de compliance p\u00f3s-migra\u00e7\u00e3o</p>"},{"location":"anexoB/2-objetivo/#13-estrategia-warm-standby-detalhada","title":"1.3 Estrat\u00e9gia Warm Standby Detalhada","text":""},{"location":"anexoB/2-objetivo/#definicao","title":"Defini\u00e7\u00e3o","text":"<p>Warm Standby mant\u00e9m uma vers\u00e3o reduzida da infraestrutura executando continuamente na nuvem de destino, com dados sincronizados periodicamente. Em caso de ativa\u00e7\u00e3o, os recursos s\u00e3o escalados para capacidade de produ\u00e7\u00e3o.</p>"},{"location":"anexoB/2-objetivo/#componentes-em-warm-standby-azure","title":"Componentes em Warm Standby (Azure)","text":"Componente Azure Estado em Standby Custo/m\u00eas Tempo de Scale-Up Blob Storage (site) Sync ativo, blob p\u00fablico $5 0 min (pronto) Blob Storage (uploads) Sync ativo, private $15 0 min (pronto) Cosmos DB 400 RU/s (m\u00ednimo) $25 10 min (scale) Function App Consumption plan $0 5 min (cold start) VM Scale Set 0 inst\u00e2ncias $0 15 min (provision) Load Balancer Provisionado $5 5 min (config) Key Vault Provisionado $2 0 min (pronto) VNet/NSG Provisionado $0 0 min (pronto) Total ~$52/m\u00eas ~30-45 min"},{"location":"anexoB/2-objetivo/#sincronizacao-de-dados","title":"Sincroniza\u00e7\u00e3o de Dados","text":"<p>Site Est\u00e1tico: - Frequ\u00eancia: Di\u00e1ria (3 AM UTC) - Ferramenta: AzCopy via cron job - Valida\u00e7\u00e3o: Checksum MD5</p> <p>Uploads (Imagens): - Frequ\u00eancia: Di\u00e1ria (4 AM UTC) - Ferramenta: AzCopy incremental - Valida\u00e7\u00e3o: Contagem de objetos + amostragem</p> <p>Metadados (DynamoDB \u2192 Cosmos DB): - Frequ\u00eancia: Di\u00e1ria (5 AM UTC) - Ferramenta: Script Python (DynamoDB Export \u2192 transform \u2192 Cosmos DB Bulk Import) - Valida\u00e7\u00e3o: Contagem de documentos + hash de amostra</p>"},{"location":"anexoB/2-objetivo/#trade-offs-da-estrategia-warm","title":"Trade-offs da Estrat\u00e9gia Warm","text":"<p>Vantagens: - RTO aceit\u00e1vel (2-4h) para o perfil do projeto - Custo controlado (~$52/m\u00eas vs $800+ de Active-Active) - Dados sincronizados (RPO 24h aceit\u00e1vel) - Infraestrutura pr\u00e9-validada (reduz risco de ativa\u00e7\u00e3o) - Pode ser usada para testes de DR peri\u00f3dicos</p> <p>Desvantagens: - RPO de 24h (perda de at\u00e9 1 dia de uploads) - RTO de 2-4h (janela de indisponibilidade) - Requer sincroniza\u00e7\u00e3o cont\u00ednua (overhead operacional) - Risco de drift entre ambientes (mitigado por IaC)</p> <p>Compara\u00e7\u00e3o com Alternativas:</p> <p>Cold Standby: RTO &gt; 6h, RPO &gt; 48h, custo ~\\(20/m\u00eas \u2192 **Descartado** (RTO inaceit\u00e1vel)   **Active-Active:** RTO &lt; 1min, RPO near-zero, custo ~\\)1000/m\u00eas \u2192 Descartado (custo excessivo para piloto)</p>"},{"location":"anexoB/2-objetivo/#14-matriz-de-decisao-de-ativacao","title":"1.4 Matriz de Decis\u00e3o de Ativa\u00e7\u00e3o","text":"Condi\u00e7\u00e3o Tempo de Avalia\u00e7\u00e3o Decis\u00e3o Respons\u00e1vel AWS region down &gt; 4h 4h Ativar DR Tech Lead Servi\u00e7o cr\u00edtico degradado &gt; 2h 2h Avaliar DR parcial Tech Lead AWS declara ETA &gt; 8h Imediato Ativar DR CTO Exig\u00eancia regulat\u00f3ria Conforme prazo legal Migra\u00e7\u00e3o planejada Legal + CTO Decis\u00e3o estrat\u00e9gica Planejado Migra\u00e7\u00e3o planejada C-Level <p>Autoridade Final: CTO ou designado (Tech Lead em aus\u00eancia)</p>"},{"location":"anexoB/3-mapeamento/","title":"Mapeamento de Servi\u00e7os e Portabilidade","text":""},{"location":"anexoB/3-mapeamento/#2-mapeamento-de-servicos-aws-azure","title":"2. Mapeamento de Servi\u00e7os AWS \u2192 Azure","text":""},{"location":"anexoB/3-mapeamento/#21-tabela-de-equivalencias","title":"2.1 Tabela de Equival\u00eancias","text":"AWS Service Azure Equivalent Grau de Portabilidade Observa\u00e7\u00f5es Cr\u00edticas S3 (site est\u00e1tico) Blob Storage + Static Website Alta Suporta hosting de site est\u00e1tico. URLs mudam (<code>.blob.core.windows.net</code>). CORS configurado em conta. S3 (uploads) Blob Storage Alta SAS tokens equivalem a pre-signed URLs. Mesma hierarquia de prefixos. Versionamento suportado. Lambda Azure Functions M\u00e9dia Runtimes similares (Python/Node). Event triggers diferentes (Event Grid vs S3 Events). Requer reescrita de c\u00f3digo de setup. DynamoDB Cosmos DB (NoSQL API) M\u00e9dia-Baixa Schema-less compat\u00edvel. Partition key equivale a PK. \u00cdndices secund\u00e1rios diferentes (GSI \u2192 Composite Index). Migra\u00e7\u00e3o de dados requer transforma\u00e7\u00e3o. EC2 (inst\u00e2ncias) Virtual Machines Alta Sizing similar (2 vCPU/4GB equivale a B2s). User-data \u2192 Custom Script Extension. Imagens Linux id\u00eanticas. Auto Scaling Group VM Scale Set Alta Pol\u00edticas de scaling similares (CPU-based, schedule). Health probes equivalentes. Application Load Balancer Azure Load Balancer (Standard) Alta Layer 7 LB. Path-based routing suportado. Health checks equivalentes. Session affinity configur\u00e1vel. VPC Virtual Network (VNet) Alta CIDR, subnets, route tables equivalentes. Security Groups Network Security Groups (NSG) Alta Regras de inbound/outbound id\u00eanticas. Stateful. IAM Roles/Policies Managed Identities + RBAC M\u00e9dia Conceito similar (identidade para recursos). Sintaxe de pol\u00edticas diferente (IAM JSON vs Azure RBAC). Requer remapeamento completo. ACM (certificados) Key Vault + App Gateway Alta Certificados TLS gerenciados. Renova\u00e7\u00e3o autom\u00e1tica (Let's Encrypt via App Gateway). Route 53 Azure DNS Alta Zonas DNS, A/CNAME records id\u00eanticos. TTL configur\u00e1vel. CloudWatch Logs Azure Monitor + Log Analytics Alta Logs centralizados. Query language diferente (CloudWatch Insights vs KQL). Dashboards equivalentes. CloudWatch Metrics Azure Monitor Metrics Alta M\u00e9tricas de recursos. Alertas configur\u00e1veis. <p>Legenda de Portabilidade: - Alta: Migra\u00e7\u00e3o direta com configura\u00e7\u00e3o m\u00ednima - M\u00e9dia: Requer reescrita/adapta\u00e7\u00e3o de c\u00f3digo/config - Baixa: Mudan\u00e7a arquitetural significativa</p>"},{"location":"anexoB/3-mapeamento/#22-detalhamento-por-componente","title":"2.2 Detalhamento por Componente","text":""},{"location":"anexoB/3-mapeamento/#221-site-estatico-s3-blob-storage","title":"2.2.1 Site Est\u00e1tico: S3 \u2192 Blob Storage","text":"<p>AWS: </p><pre><code>S3 Bucket: demay-site-estatico\n- Static Website Hosting enabled\n- Index: index.html\n- Error: 404.html\n- Public access (website endpoint)\n</code></pre><p></p> <p>Azure Equivalente: </p><pre><code>Storage Account: demaysiteestatico\n- Static Website enabled\n- Index: index.html\n- Error: 404.html\n- Public blob access\n- URL: https://demaysiteestatico.z13.web.core.windows.net/\n</code></pre><p></p> <p>Mudan\u00e7as Necess\u00e1rias: - Atualizar URLs de assets (se hardcoded) - Reconfigurar CORS (definido na Storage Account, n\u00e3o no container) - Atualizar DNS para apontar ao endpoint do Blob (ou usar CDN)</p> <p>Riscos: - URLs diferentes podem quebrar links externos - Comportamento de cache pode diferir levemente</p> <p>Mitiga\u00e7\u00e3o: - Usar Azure CDN para URLs customizadas - Configurar redirects 301 se necess\u00e1rio - Testar todos os assets antes do cutover</p> <p>Mudan\u00e7as Necess\u00e1rias: - Substituir SDK boto3 por azure-storage-blob - Adaptar l\u00f3gica de gera\u00e7\u00e3o de URL pr\u00e9-assinada \u2192 SAS token - Atualizar vari\u00e1veis de ambiente (account name, keys)</p> <p>Compatibilidade de API: - HTTP PUT para upload (id\u00eantico) - Content-Type headers (id\u00eantico) - Timeout/expira\u00e7\u00e3o (equivalente)</p> <p>Riscos: - Formato de URL diferente (pode quebrar parsers de URL) - Permiss\u00f5es de SAS mais granulares (ajustar testes)</p>"},{"location":"anexoB/3-mapeamento/#223-conversao-lambda-azure-functions","title":"2.2.3 Convers\u00e3o: Lambda \u2192 Azure Functions","text":"<p>Riscos: - Query patterns diferentes (DynamoDB Query vs Cosmos SQL API) - Custos imprevis\u00edveis se RU/s mal dimensionado - Limite de documento de 2MB (DynamoDB: 400KB) - compat\u00edvel com chunks</p> <p>Mitiga\u00e7\u00e3o: - Testar queries em ambiente de staging antes do cutover - Monitorar Request Units (RU/s) e ajustar conforme necess\u00e1rio - Manter estrat\u00e9gia de chunking (j\u00e1 resolve limite de tamanho)</p>"},{"location":"anexoB/3-mapeamento/#225-apiaplicacao-ec2-azure-vms","title":"2.2.5 API/Aplica\u00e7\u00e3o: EC2 \u2192 Azure VMs","text":"<p>AWS: </p><pre><code>Instance Type: t3.small (2 vCPU, 2GB RAM)\nAuto Scaling Group: 2-4 inst\u00e2ncias\nAMI: Ubuntu 22.04 + Node.js app\nUser Data: git clone + npm install + pm2 start\n</code></pre><p></p> <p>Azure: </p><pre><code>VM Size: B2s (2 vCPU, 4GB RAM)\nVM Scale Set: 2-4 inst\u00e2ncias\nImage: Ubuntu 22.04 LTS\nCustom Script Extension: git clone + npm install + pm2 start\n</code></pre><p></p> <p>Mudan\u00e7as na Aplica\u00e7\u00e3o: - Vari\u00e1veis de ambiente (AWS \u2192 Azure credentials) - SDK calls (boto3 \u2192 azure-storage-blob, azure-cosmos) - Healthcheck endpoint (manter GET /health) - Logs (stdout \u2192 Azure Monitor se configurado)</p> <p>Riscos: - Pre\u00e7o ligeiramente diferente (B2s ~\\(30/m\u00eas vs t3.small ~\\)15/m\u00eas) - Tempo de boot pode variar (testar cold start) - Managed Identity setup diferente de IAM Role</p> <p>Mitiga\u00e7\u00e3o: - Criar golden image com app pr\u00e9-instalada (reduz boot time) - Configurar System-Assigned Managed Identity com acesso a Blob + Cosmos - Testar scale-out/scale-in antes do go-live</p>"},{"location":"anexoB/3-mapeamento/#226-balanceamento-alb-azure-load-balancer","title":"2.2.6 Balanceamento: ALB \u2192 Azure Load Balancer","text":"<p>AWS ALB: </p><pre><code>Type: Application Load Balancer (Layer 7)\nListeners: HTTP (80) \u2192 redirect 443, HTTPS (443)\nTarget Group: api-tg (health check: GET /health)\nRules: /* \u2192 target group\n</code></pre><p></p> <p>Azure Equivalente: </p><pre><code>Type: Azure Load Balancer Standard (Layer 4) \n      + Application Gateway (Layer 7 - se precisar path routing)\nBackend Pool: api-backend (VMs do VMSS)\nHealth Probe: HTTP /health (interval: 15s)\nLoad Balancing Rules: Port 443 \u2192 Backend Pool\n</code></pre><p></p> <p>Nota: Para funcionalidade completa de Layer 7 (path-based routing, SSL offload), usar Application Gateway em vez de Load Balancer Standard.</p> <p>Application Gateway (recomendado): </p><pre><code>SKU: Standard_v2\nListeners: HTTP (80) redirect, HTTPS (443)\nBackend Pool: api-backend\nHTTP Settings: protocol HTTP, port 8080, path /health\nRules: /* \u2192 backend pool\nSSL Certificate: Key Vault integration\n</code></pre><p></p> <p>Mudan\u00e7as: - Health check configurado no backend HTTP settings - Certificado TLS migrado para Key Vault - URLs permanecem id\u00eanticas ap\u00f3s DNS cutover</p> <p>Riscos: - Application Gateway mais caro (~\\(125/m\u00eas vs ALB ~\\)20/m\u00eas) - Load Balancer Standard n\u00e3o faz SSL offload (necessita App Gateway)</p> <p>Mitiga\u00e7\u00e3o: - Usar Application Gateway para paridade completa com ALB - Configurar auto-scaling do App Gateway (v2 suporta)</p>"},{"location":"anexoB/3-mapeamento/#227-rede-vpc-vnet","title":"2.2.7 Rede: VPC \u2192 VNet","text":"<p>AWS VPC: </p><pre><code>CIDR: 10.0.0.0/16\nSubnets:\n  - Public 1: 10.0.1.0/24 (us-east-1a)\n  - Public 2: 10.0.2.0/24 (us-east-1b)\n  - Private 1: 10.0.11.0/24 (us-east-1a)\n  - Private 2: 10.0.12.0/24 (us-east-1b)\nRoute Tables:\n  - Public: 0.0.0.0/0 \u2192 IGW\n  - Private: 0.0.0.0/0 \u2192 NAT Gateway\n</code></pre><p></p> <p>Azure VNet: </p><pre><code>Address Space: 10.0.0.0/16\nSubnets:\n  - Public: 10.0.1.0/24\n  - Private: 10.0.11.0/24\n  - AppGateway: 10.0.3.0/24 (required for App Gateway)\nRoute Tables:\n  - Public: 0.0.0.0/0 \u2192 Internet (default)\n  - Private: 0.0.0.0/0 \u2192 NAT Gateway (optional)\n</code></pre><p></p> <p>Diferen\u00e7as: - Azure n\u00e3o tem conceito de \"Availability Zones\" em subnets (VMs escolhem AZ) - Application Gateway requer subnet dedicada - Route tables equivalentes</p> <p>Mapeamento de CIDR (manter compat\u00edvel): - Usar mesmo CIDR 10.0.0.0/16 para facilitar VPN/peering futuro</p>"},{"location":"anexoB/3-mapeamento/#228-seguranca-security-groups-nsg","title":"2.2.8 Seguran\u00e7a: Security Groups \u2192 NSG","text":"<p>AWS Security Group (EC2): </p><pre><code>Inbound:\n  - TCP 8080 from ALB Security Group\n  - TCP 22 from Bastion (maintenance)\nOutbound:\n  - All traffic (default)\n</code></pre><p></p> <p>Azure NSG (VMSS): </p><pre><code>Inbound:\n  - TCP 8080 from Application Gateway subnet (10.0.3.0/24)\n  - TCP 22 from Bastion subnet (10.0.4.0/24)\n  - Deny all others\nOutbound:\n  - HTTPS 443 to Internet (Blob, Cosmos APIs)\n  - Deny all others (principle of least privilege)\n</code></pre><p></p> <p>Mudan\u00e7as: - Referenciar por subnet CIDR em vez de Security Group ID - NSG aplicado a subnet ou NIC (escolher subnet para simplicidade)</p> <p>Compatibilidade: - L\u00f3gica de firewall id\u00eantica (stateful) - Allow/Deny rules equivalentes</p>"},{"location":"anexoB/3-mapeamento/#229-identidade-iam-managed-identity-rbac","title":"2.2.9 Identidade: IAM \u2192 Managed Identity + RBAC","text":"<p>Mudan\u00e7as: - Remapear todas as pol\u00edticas IAM para RBAC - Usar Managed Identity (sem keys no c\u00f3digo) - Configurar role assignments via portal ou ARM template</p> <p>Riscos: - Sintaxe totalmente diferente (requer an\u00e1lise manual) - Azure RBAC tem menos granularidade (a\u00e7\u00f5es predefinidas)</p> <p>Mitiga\u00e7\u00e3o: - Documentar mapeamento IAM \u2192 RBAC em planilha - Testar permiss\u00f5es em ambiente de dev antes do DR</p>"},{"location":"anexoB/3-mapeamento/#2210-certificados-acm-key-vault","title":"2.2.10 Certificados: ACM \u2192 Key Vault","text":"<p>AWS ACM: </p><pre><code>Certificate: *.demay.com (wildcard)\nValidation: DNS (Route 53)\nAuto-renewal: Gerenciado pela AWS\n</code></pre><p></p> <p>Azure Key Vault + App Gateway: </p><pre><code>Key Vault: demay-keyvault\nCertificate: wildcard-demay-com (importado ou Let's Encrypt)\nApp Gateway: SSL certificate from Key Vault\nAuto-renewal: Configurar via Key Vault + App Gateway integration\n</code></pre><p></p> <p>Processo de Migra\u00e7\u00e3o: 1. Exportar certificado privado do ACM (ou re-emitir) 2. Importar para Azure Key Vault 3. Conceder acesso ao App Gateway (Managed Identity) 4. Configurar HTTPS listener no App Gateway</p> <p>Riscos: - Downtime durante troca de certificado (se n\u00e3o planejar) - Certificado Let's Encrypt tem renewal manual no Azure (sem ACM automation)</p> <p>Mitiga\u00e7\u00e3o: - Emitir certificado wildcard com validade longa (1 ano) - Configurar alerta de expira\u00e7\u00e3o no Key Vault - Usar Azure App Service Managed Certificate se aplic\u00e1vel (gr\u00e1tis, auto-renewal)</p>"},{"location":"anexoB/3-mapeamento/#23-comparacao-de-custos-warm-standby","title":"2.3 Compara\u00e7\u00e3o de Custos (Warm Standby)","text":"Componente AWS (Atual) Azure (Standby) Azure (Produ\u00e7\u00e3o) Storage (site) S3: $2/m\u00eas Blob: $2/m\u00eas Blob: $2/m\u00eas Storage (uploads) S3: $12/m\u00eas Blob: $15/m\u00eas Blob: $15/m\u00eas Database DynamoDB On-Demand: $8/m\u00eas Cosmos 400 RU: $25/m\u00eas Cosmos 4000 RU: $240/m\u00eas Functions Lambda: $3/m\u00eas Functions: $0 (consumption) Functions: $5/m\u00eas Compute EC2 2x t3.small: $30/m\u00eas VMSS 0 instances: $0 VMSS 2x B2s: $60/m\u00eas Load Balancer ALB: $20/m\u00eas App Gateway: $5 (minimal) App Gateway: $125/m\u00eas Networking Data transfer: $5/m\u00eas VNet: $0 Data transfer: $8/m\u00eas Total $80/m\u00eas $52/m\u00eas $455/m\u00eas <p>Observa\u00e7\u00f5es: - Azure Standby \u00e9 65% do custo AWS atual - Azure Produ\u00e7\u00e3o seria 5.7x mais caro (principalmente App Gateway + Cosmos) - Otimiza\u00e7\u00e3o poss\u00edvel: usar Load Balancer Standard ($18/m\u00eas) em vez de App Gateway se n\u00e3o precisar Layer 7</p>"},{"location":"anexoB/3-mapeamento/#24-matriz-de-riscos-de-portabilidade","title":"2.4 Matriz de Riscos de Portabilidade","text":"Componente Risco Impacto Probabilidade Mitiga\u00e7\u00e3o Lambda \u2192 Functions Cold start mais lento M\u00e9dio Alta Testar performance; considerar Premium plan DynamoDB \u2192 Cosmos Query patterns incompat\u00edveis Alto M\u00e9dia Validar queries em staging; ajustar \u00edndices IAM \u2192 RBAC Permiss\u00f5es mal configuradas Alto M\u00e9dia Checklist de permiss\u00f5es; testes de seguran\u00e7a S3 URLs \u2192 Blob URLs Links quebrados Baixo Baixa Usar CDN com dom\u00ednio customizado ACM \u2192 Key Vault Expira\u00e7\u00e3o de certificado M\u00e9dio Baixa Alertas de expira\u00e7\u00e3o; documentar renewal Logs CloudWatch \u2192 Monitor Perda de visibilidade M\u00e9dio Alta Configurar Application Insights imediatamente"},{"location":"anexoB/4-procedimentos/","title":"Procedimentos e Runbooks","text":""},{"location":"anexoB/4-procedimentos/#3-procedimentos-e-runbooks-de-dr","title":"3. Procedimentos e Runbooks de DR","text":""},{"location":"anexoB/4-procedimentos/#31-visao-geral","title":"3.1 Vis\u00e3o Geral","text":"<p>Este cap\u00edtulo detalha os procedimentos passo a passo para ativa\u00e7\u00e3o do Disaster Recovery, organizados em fases sequenciais:</p> <ol> <li>Prepara\u00e7\u00e3o - A\u00e7\u00f5es executadas antes de qualquer crise (durante Warm Standby)</li> <li>Ativa\u00e7\u00e3o - Procedimentos de emerg\u00eancia ao detectar falha</li> <li>Valida\u00e7\u00e3o - Testes de integridade p\u00f3s-migra\u00e7\u00e3o</li> <li>Rollback - Retorno \u00e0 AWS caso Azure falhe</li> <li>Comunica\u00e7\u00e3o - Fluxos de informa\u00e7\u00e3o interna e externa</li> </ol> <p>Tempo Total Estimado (RTO): 2-4 horas do in\u00edcio da ativa\u00e7\u00e3o ao servi\u00e7o restaurado.</p>"},{"location":"anexoB/4-procedimentos/#32-fase-1-preparacao-pre-crise","title":"3.2 Fase 1: Prepara\u00e7\u00e3o (Pr\u00e9-Crise)","text":""},{"location":"anexoB/4-procedimentos/#objetivo","title":"Objetivo","text":"<p>Manter ambiente Azure em Warm Standby operacional, com dados sincronizados e infraestrutura validada.</p>"},{"location":"anexoB/4-procedimentos/#frequencia","title":"Frequ\u00eancia","text":"<p>Execu\u00e7\u00e3o cont\u00ednua (automa\u00e7\u00f5es di\u00e1rias + revis\u00f5es mensais).</p>"},{"location":"anexoB/4-procedimentos/#321-sincronizacao-de-dados","title":"3.2.1 Sincroniza\u00e7\u00e3o de Dados","text":"<p>Respons\u00e1vel: DevOps Engineer Frequ\u00eancia: Di\u00e1ria (3-5 AM UTC) SLA: Sync completo em &lt; 2 horas</p> <p>A sincroniza\u00e7\u00e3o de dados \u00e9 uma das atividades centrais do modo Warm Standby. Seu objetivo \u00e9 garantir que o ambiente Azure mantenha uma c\u00f3pia atualizada de todos os componentes cr\u00edticos da aplica\u00e7\u00e3o hospedados originalmente na AWS \u2014 incluindo o site est\u00e1tico, as imagens de upload e os metadados armazenados no DynamoDB.</p> <p>O processo \u00e9 dividido em tr\u00eas fluxos principais:</p> <p>Site Est\u00e1tico (S3 \u2192 Blob Storage)</p> <p>O conte\u00fado do site institucional hospedado no Amazon S3 \u00e9 replicado diariamente para o container p\u00fablico do Azure Blob Storage configurado para Static Website Hosting. Essa tarefa \u00e9 agendada como um cron job di\u00e1rio, que realiza uma sincroniza\u00e7\u00e3o recursiva entre os buckets da AWS e a conta de armazenamento da Azure, substituindo automaticamente arquivos alterados e removendo vers\u00f5es obsoletas.</p> <p>Ao final da execu\u00e7\u00e3o, o DevOps valida a integridade da sincroniza\u00e7\u00e3o por meio de uma contagem de arquivos e verifica\u00e7\u00e3o de tamanho total, assegurando que a quantidade de objetos no Blob coincida com o S3. O sucesso \u00e9 considerado alcan\u00e7ado quando n\u00e3o h\u00e1 diverg\u00eancias e todas as p\u00e1ginas est\u00e1ticas respondem com c\u00f3digo HTTP 200 no endpoint do Azure.</p> <p>Uploads de Imagens (S3 \u2192 Blob Storage Privado) As imagens enviadas pelos usu\u00e1rios, originalmente armazenadas em um bucket privado no S3, tamb\u00e9m s\u00e3o sincronizadas com o Blob Storage no Azure. O processo \u00e9 semelhante ao do site est\u00e1tico, por\u00e9m sem exclus\u00e3o autom\u00e1tica de objetos no destino, evitando perda acidental de vers\u00f5es recentes. Ap\u00f3s a sincroniza\u00e7\u00e3o, o sistema executa uma valida\u00e7\u00e3o por amostragem, verificando um conjunto de arquivos (geralmente os \u00faltimos 10 envios) para confirmar que os hashes MD5 ou ETags s\u00e3o id\u00eanticos entre origem e destino. A sincroniza\u00e7\u00e3o \u00e9 considerada bem-sucedida quando 100% dos arquivos amostrados apresentam integridade confirmada.</p> <p>Metadados (DynamoDB \u2192 Cosmos DB) Este \u00e9 o processo mais sens\u00edvel, pois envolve dados estruturados essenciais ao funcionamento da aplica\u00e7\u00e3o. Diariamente, \u00e9 realizado um backup incremental do DynamoDB atrav\u00e9s de exporta\u00e7\u00e3o autom\u00e1tica para um bucket S3 dedicado. Essa exporta\u00e7\u00e3o cont\u00e9m os metadados das imagens (IDs, timestamps, \u00edndices e fragmentos Base64). Ap\u00f3s o backup, o conjunto exportado \u00e9 copiado para o ambiente de staging no Azure, onde \u00e9 convertido do formato DynamoDB JSON para Cosmos DB JSON. A transforma\u00e7\u00e3o adapta as chaves e \u00edndices, criando identificadores \u00fanicos compat\u00edveis com o modelo de dados do Cosmos DB.</p> <p>Em seguida, ocorre a importa\u00e7\u00e3o em lote (bulk import) para o container de destino no Cosmos, mantendo a estrutura de particionamento original. A etapa final consiste em uma verifica\u00e7\u00e3o de integridade, comparando o n\u00famero total de documentos e validando amostras de 10% dos registros por meio de hashes de verifica\u00e7\u00e3o.</p> <p>O procedimento \u00e9 considerado conclu\u00eddo com sucesso quando a contagem e os hashes de amostra coincidem com o backup da AWS.</p> <p>Monitoramento e Alertas: O processo \u00e9 acompanhado tanto pela AWS quanto pela Azure. Alarmes do CloudWatch notificam o time de DevOps caso a exporta\u00e7\u00e3o ou sincroniza\u00e7\u00e3o falhe por dois dias consecutivos, enquanto o Azure Monitor coleta logs de execu\u00e7\u00e3o e erros das ferramentas de sincroniza\u00e7\u00e3o, permitindo r\u00e1pida identifica\u00e7\u00e3o de falhas de conectividade ou autentica\u00e7\u00e3o.</p> <p>Com essa rotina, garante-se que o ambiente de standby mantenha uma c\u00f3pia quase atualizada dos dados produtivos, suportando o RPO de at\u00e9 24 horas definido no plano de DR e permitindo ativa\u00e7\u00e3o imediata em caso de incidente na AWS.</p>"},{"location":"anexoB/4-procedimentos/#322-validacao-de-infraestrutura-mensal","title":"3.2.2 Valida\u00e7\u00e3o de Infraestrutura (Mensal)","text":"<p>Respons\u00e1vel: Tech Lead Frequ\u00eancia: Primeira segunda-feira de cada m\u00eas Dura\u00e7\u00e3o: Aproximadamente 1 hora</p> <p>A valida\u00e7\u00e3o mensal da infraestrutura tem como objetivo confirmar que todos os componentes do ambiente de Warm Standby no Azure permanecem \u00edntegros, atualizados e prontos para serem ativados imediatamente em caso de desastre na AWS. Essa verifica\u00e7\u00e3o peri\u00f3dica garante que nenhum recurso essencial tenha sido desconfigurado, expirado ou desprovisionado inadvertidamente, mantendo a confiabilidade do plano de recupera\u00e7\u00e3o.</p> <p>Durante o procedimento, o Tech Lead segue uma rotina estruturada de checagem, percorrendo cada camada da arquitetura:</p> <ol> <li> <p>Verifica\u00e7\u00e3o do Blob Storage: o respons\u00e1vel acessa o endere\u00e7o p\u00fablico do site est\u00e1tico hospedado no Azure Blob Storage, confirmando que a p\u00e1gina principal (index.html) responde corretamente e sem erros HTTP. Essa etapa assegura que o conte\u00fado do site e as permiss\u00f5es de acesso do container est\u00e3o corretas, garantindo que o front-end possa ser disponibilizado sem interven\u00e7\u00e3o adicional.</p> </li> <li> <p>Valida\u00e7\u00e3o do Cosmos DB: \u00e9 testada a conectividade com o banco de dados de standby, confirmando que a conta Cosmos DB est\u00e1 ativa, o container de imagens acess\u00edvel e as permiss\u00f5es de leitura e escrita v\u00e1lidas. Essa verifica\u00e7\u00e3o demonstra que os metadados replicados do DynamoDB podem ser consultados e atualizados normalmente, condi\u00e7\u00e3o indispens\u00e1vel para a ativa\u00e7\u00e3o r\u00e1pida do ambiente.</p> </li> <li> <p>Checagem das Azure Functions: o Tech Lead confirma que as fun\u00e7\u00f5es de processamento (principalmente a de convers\u00e3o de imagens) est\u00e3o corretamente implantadas e listadas no Function App. Essa etapa valida que o c\u00f3digo do Lambda convertido foi sincronizado e est\u00e1 pronto para execu\u00e7\u00e3o, inclusive com os triggers de Blob configurados.</p> </li> <li> <p>Inspe\u00e7\u00e3o do VM Scale Set (VMSS): verifica-se que a defini\u00e7\u00e3o do conjunto de m\u00e1quinas virtuais da API encontra-se configurada e funcional, por\u00e9m com capacidade zero de inst\u00e2ncias, conforme previsto no modo Warm Standby. Isso confirma que as imagens base e scripts de inicializa\u00e7\u00e3o permanecem dispon\u00edveis para scale-up imediato em caso de ativa\u00e7\u00e3o.</p> </li> <li> <p>Status do Application Gateway: o Tech Lead acessa o painel ou usa o comando de gerenciamento para confirmar que o Application Gateway est\u00e1 provisionado, em estado operacional e pronto para receber novas configura\u00e7\u00f5es de backend pools e regras de roteamento. Esse gateway ser\u00e1 respons\u00e1vel pelo tr\u00e1fego de produ\u00e7\u00e3o durante a opera\u00e7\u00e3o de DR.</p> </li> <li> <p>Valida\u00e7\u00e3o do Certificado TLS no Key Vault: \u00e9 verificado se o certificado wildcard usado para comunica\u00e7\u00e3o segura est\u00e1 armazenado no Key Vault e se sua validade \u00e9 superior a 30 dias. Caso o certificado esteja prestes a expirar, inicia-se imediatamente o processo de renova\u00e7\u00e3o e revalida\u00e7\u00e3o do v\u00ednculo com o Application Gateway.</p> </li> <li> <p>Verifica\u00e7\u00e3o do DNS de Staging: o Tech Lead confirma que o registro DNS de conting\u00eancia (por exemplo, <code>dr.demay.com</code>) est\u00e1 devidamente configurado e aponta para o endere\u00e7o do Application Gateway em Azure. Essa checagem garante que o failover poder\u00e1 ser realizado sem necessidade de cria\u00e7\u00e3o manual de registros durante uma crise.</p> </li> </ol> <p>Ao final do processo, o Tech Lead registra o resultado de cada etapa no relat\u00f3rio mensal de prontid\u00e3o de DR. Qualquer falha identificada deve ser corrigida imediatamente e retestada na mesma janela de manuten\u00e7\u00e3o. Caso a falha n\u00e3o possa ser resolvida no mesmo dia, o incidente \u00e9 escalado ao CTO para prioriza\u00e7\u00e3o e acompanhamento.</p> <p>Essa rotina de valida\u00e7\u00e3o preventiva \u00e9 fundamental para evitar surpresas no momento de um cutover real, garantindo que a infraestrutura de conting\u00eancia esteja sempre em conformidade com o estado esperado e possa ser promovida a ambiente produtivo em menos de 2 horas.</p>"},{"location":"anexoB/4-procedimentos/#33-fase-2-ativacao-durante-crise","title":"3.3 Fase 2: Ativa\u00e7\u00e3o (Durante Crise)","text":""},{"location":"anexoB/4-procedimentos/#objetivo_1","title":"Objetivo","text":"<p>Migrar tr\u00e1fego de produ\u00e7\u00e3o de AWS para Azure no menor tempo poss\u00edvel.</p>"},{"location":"anexoB/4-procedimentos/#331-declaracao-de-desastre-e-mobilizacao","title":"3.3.1 Declara\u00e7\u00e3o de Desastre e Mobiliza\u00e7\u00e3o","text":"<p>Respons\u00e1vel: Tech Lead ou CTO Dura\u00e7\u00e3o: 5 minutos</p> <p>A fase de declara\u00e7\u00e3o de desastre marca o in\u00edcio oficial da ativa\u00e7\u00e3o do plano de Disaster Recovery. \u00c9 o momento em que a equipe de tecnologia reconhece formalmente uma falha grave ou uma interrup\u00e7\u00e3o prolongada na infraestrutura principal da AWS e decide iniciar a migra\u00e7\u00e3o tempor\u00e1ria para o ambiente de conting\u00eancia no Azure.</p> <p>Assim que a decis\u00e3o \u00e9 tomada, o Tech Lead ou, na aus\u00eancia dele, o CTO, deve emitir uma comunica\u00e7\u00e3o imediata em todos os canais internos oficiais da organiza\u00e7\u00e3o. Essa mensagem deve conter informa\u00e7\u00f5es claras sobre o cen\u00e1rio de falha, o motivo da ativa\u00e7\u00e3o do DR, o hor\u00e1rio de in\u00edcio do procedimento e a refer\u00eancia ao runbook correspondente. O objetivo \u00e9 eliminar ambiguidades e garantir que toda a equipe envolvida saiba que o processo de recupera\u00e7\u00e3o est\u00e1 em andamento.</p> <p>Em seguida, \u00e9 convocada uma War Room virtual, um espa\u00e7o de reuni\u00e3o exclusivo para gerenciamento do incidente. Essa sala de coordena\u00e7\u00e3o deve incluir obrigatoriamente os pap\u00e9is cr\u00edticos do processo: o Tech Lead, o engenheiro DevOps respons\u00e1vel pela execu\u00e7\u00e3o t\u00e9cnica no Azure, o SRE encarregado de monitoramento e valida\u00e7\u00e3o de m\u00e9tricas, e o CTO, que participa como autoridade de decis\u00e3o para aprovar a\u00e7\u00f5es cr\u00edticas e avaliar riscos. O Product Manager tamb\u00e9m pode ser inclu\u00eddo para centralizar a comunica\u00e7\u00e3o com usu\u00e1rios e stakeholders externos.</p> <p>Ap\u00f3s a defini\u00e7\u00e3o de pap\u00e9is, o Incident Commander realiza um checkpoint, certificando-se de que todos compreendem o cen\u00e1rio atual, o plano de a\u00e7\u00e3o e as prioridades imediatas. Esse alinhamento \u00e9 essencial para evitar sobreposi\u00e7\u00e3o de tarefas e minimizar erros durante a execu\u00e7\u00e3o do runbook.</p>"},{"location":"anexoB/4-procedimentos/#332-sincronizacao-final-de-dados","title":"3.3.2 Sincroniza\u00e7\u00e3o Final de Dados","text":"<p>Respons\u00e1vel: DevOps Engineer Dura\u00e7\u00e3o: 30-60 minutos</p> <p>Objetivo: Garantir que todos os dados da AWS estejam atualizados no Azure antes do redirecionamento do tr\u00e1fego, reduzindo ao m\u00ednimo poss\u00edvel a perda de dados (RPO).</p> <p>Nesta fase, o engenheiro de DevOps executa a \u00faltima sincroniza\u00e7\u00e3o completa entre os ambientes, assegurando que nenhuma informa\u00e7\u00e3o relevante fique apenas na origem antes do cutover. Trata-se de uma etapa cr\u00edtica e irrevers\u00edvel, pois ap\u00f3s o redirecionamento do DNS, a AWS deixa de ser a origem ativa dos dados.</p> <p>O processo inicia com a suspens\u00e3o tempor\u00e1ria de novos uploads na AWS, se necess\u00e1rio, aplicando uma pol\u00edtica de bloqueio no bucket de uploads. Essa medida evita diverg\u00eancias entre as vers\u00f5es dos arquivos durante a sincroniza\u00e7\u00e3o emergencial.</p> <p>Em seguida, ocorre a sincroniza\u00e7\u00e3o for\u00e7ada dos dados, que abrange dois fluxos:</p> <p>Uploads de imagens: \u00e9 realizada uma c\u00f3pia direta dos objetos armazenados no S3 para o Blob Storage no Azure. O DevOps acompanha o progresso e registra logs de eventuais falhas de transfer\u00eancia.</p> <p>Metadados das imagens: o DynamoDB \u00e9 exportado rapidamente para o S3 e, em seguida, os arquivos s\u00e3o transferidos e importados para o Cosmos DB ap\u00f3s transforma\u00e7\u00e3o no formato apropriado. Esse processo \u00e9 executado de forma automatizada por scripts previamente testados.</p> <p>Ao t\u00e9rmino, o DevOps realiza uma valida\u00e7\u00e3o de integridade, comparando contagens e amostras de registros entre os dois ambientes. Se ao menos 95% dos dados estiverem confirmadamente sincronizados, o Incident Commander autoriza o prosseguimento. Percentuais inferiores a 90% exigem avalia\u00e7\u00e3o executiva imediata pelo CTO, que decidir\u00e1 entre aguardar uma nova tentativa ou aceitar a perda residual de dados, conforme o impacto operacional.</p>"},{"location":"anexoB/4-procedimentos/#333-scale-up-da-infraestrutura-azure","title":"3.3.3 Scale-Up da Infraestrutura Azure","text":"<p>Respons\u00e1vel: DevOps Engineer Dura\u00e7\u00e3o: 30-45 minutos</p> <p>Objetivo: Ativar e dimensionar os recursos do ambiente Azure at\u00e9 atingir a capacidade total de produ\u00e7\u00e3o, garantindo que todos os componentes essenciais estejam operacionais e em estado \u201csaud\u00e1vel\u201d.</p> <p>Nesta fase, o DevOps expande o ambiente de Warm Standby para produ\u00e7\u00e3o. O processo come\u00e7a ajustando o Cosmos DB, elevando a taxa de requisi\u00e7\u00f5es (RU/s) para suportar a carga esperada. Esse aumento \u00e9 monitorado para confirmar que o banco responde sem lat\u00eancia excessiva ou erros de throughput.</p> <p>Em seguida, o VM Scale Set (API) \u00e9 escalado para duas inst\u00e2ncias, ativando as m\u00e1quinas virtuais e verificando se est\u00e3o em estado \u201cRunning\u201d. Ap\u00f3s o boot, o DevOps confirma que os servi\u00e7os da API foram iniciados corretamente e que os health checks retornam status 200.</p> <p>Com o backend ativo, \u00e9 verificado o Application Gateway, garantindo que todos os backends apare\u00e7am como \u201cHealthy\u201d. Caso algum esteja inoperante, os logs das VMs s\u00e3o revisados imediatamente para corre\u00e7\u00e3o.</p> <p>Por fim, realiza-se o aquecimento das Azure Functions, acionando um evento de teste para reduzir o tempo de resposta inicial. Logs no Application Insights confirmam a execu\u00e7\u00e3o bem-sucedida.</p>"},{"location":"anexoB/4-procedimentos/#334-cutover-de-dns","title":"3.3.4 Cutover de DNS","text":"<p>Respons\u00e1vel: Tech Lead Dura\u00e7\u00e3o: 10-15 minutos</p> <p>Objetivo: Redirecionar todo o tr\u00e1fego de usu\u00e1rios para o ambiente Azure de forma controlada e segura.</p> <p>Ap\u00f3s a confirma\u00e7\u00e3o de que todos os componentes do Azure est\u00e3o \u201cHealthy\u201d e o Incident Commander autorizar o prosseguimento, o Tech Lead executa o cutover de DNS, ou seja, a troca dos registros que definem para onde os usu\u00e1rios ser\u00e3o direcionados.</p> <p>Primeiro, verifica-se se o TTL (Time to Live) dos registros DNS j\u00e1 est\u00e1 configurado para um valor baixo \u2014 idealmente 300 segundos ou menos \u2014 para permitir uma propaga\u00e7\u00e3o r\u00e1pida. Se ainda estiver alto, o TTL \u00e9 reduzido antes da troca e aguarda-se o tempo necess\u00e1rio para a atualiza\u00e7\u00e3o se espalhar entre os servidores de nomes p\u00fablicos.</p> <p>Em seguida, os registros A ou CNAME do dom\u00ednio principal e do subdom\u00ednio da API s\u00e3o atualizados, apontando para o endere\u00e7o p\u00fablico do Application Gateway hospedado no Azure. Essa altera\u00e7\u00e3o efetiva o redirecionamento do tr\u00e1fego dos clientes para o novo ambiente. Caso o site est\u00e1tico tamb\u00e9m precise ser movido, seu registro \u00e9 atualizado para o endpoint p\u00fablico do Blob Storage, garantindo a continuidade do front-end.</p> <p>Ap\u00f3s aplicar as mudan\u00e7as, o Tech Lead monitora a propaga\u00e7\u00e3o do DNS a partir de diferentes resolvers p\u00fablicos (como Google, Cloudflare e OpenDNS) at\u00e9 confirmar que todos retornam o novo endere\u00e7o IP do Azure. Esse processo normalmente leva poucos minutos e \u00e9 acompanhado em tempo real pela equipe.</p> <p>O corte de DNS \u00e9 considerado conclu\u00eddo quando o dom\u00ednio principal e o da API resolvem corretamente para o ambiente Azure em pelo menos tr\u00eas resolvers distintos, confirmando que os usu\u00e1rios est\u00e3o acessando a infraestrutura de conting\u00eancia de forma est\u00e1vel. A partir desse momento, a opera\u00e7\u00e3o passa oficialmente a rodar no ambiente de recupera\u00e7\u00e3o.</p>"},{"location":"anexoB/4-procedimentos/#34-fase-3-validacao","title":"3.4 Fase 3: Valida\u00e7\u00e3o","text":"<p>Respons\u00e1vel: SRE + Tech Lead Dura\u00e7\u00e3o: 30-60 minutos Objetivo: Confirmar que o sistema no ambiente Azure est\u00e1 completamente operacional ap\u00f3s o failover e que todos os dados foram sincronizados corretamente.</p>"},{"location":"anexoB/4-procedimentos/#341-testes-de-fumaca-smoke-tests","title":"3.4.1 Testes de Fuma\u00e7a (Smoke Tests)","text":"<p>Prop\u00f3sito: Validar rapidamente se os principais componentes do ambiente Azure respondem de forma esperada.</p> <p>Assim que o tr\u00e1fego \u00e9 direcionado para o Azure, o SRE executa uma s\u00e9rie de verifica\u00e7\u00f5es simples, conhecidas como smoke tests, que confirmam o funcionamento b\u00e1sico da aplica\u00e7\u00e3o. O objetivo n\u00e3o \u00e9 testar a l\u00f3gica completa do sistema, mas assegurar que os servi\u00e7os principais \u2014 API, site est\u00e1tico, balanceador e DNS \u2014 est\u00e3o operando como esperado.</p> <p>O primeiro passo \u00e9 verificar a sa\u00fade da API, acessando o endpoint de monitoramento /health. A resposta deve indicar o status \u201chealthy\u201d, confirmando que as inst\u00e2ncias do VM Scale Set est\u00e3o ativas e a aplica\u00e7\u00e3o em execu\u00e7\u00e3o.</p> <p>Em seguida, o SRE acessa o site est\u00e1tico hospedado no Blob Storage, conferindo se o dom\u00ednio principal responde com o c\u00f3digo HTTP 200. Essa checagem simples garante que o front-end foi corretamente replicado e est\u00e1 acess\u00edvel ao p\u00fablico.</p> <p>O pr\u00f3ximo teste envolve o Application Gateway, onde \u00e9 validado se os backends \u2014 as m\u00e1quinas virtuais que hospedam a API \u2014 est\u00e3o com o estado \u201cHealthy\u201d. Caso algum apare\u00e7a como \u201cUnhealthy\u201d, a equipe revisa rapidamente logs e configura\u00e7\u00f5es de rede antes de prosseguir.</p> <p>Por fim, \u00e9 feita a verifica\u00e7\u00e3o de propaga\u00e7\u00e3o DNS, consultando diferentes servidores p\u00fablicos para confirmar que o dom\u00ednio da aplica\u00e7\u00e3o (como api.demay.com) j\u00e1 est\u00e1 resolvendo para o endere\u00e7o IP do Azure. Isso comprova que o redirecionamento do tr\u00e1fego foi conclu\u00eddo com sucesso.</p>"},{"location":"anexoB/4-procedimentos/#342-teste-end-to-end-upload-conversao-consulta","title":"3.4.2 Teste End-to-End (Upload \u2192 Convers\u00e3o \u2192 Consulta)","text":"<p>Prop\u00f3sito: Garantir integridade total do fluxo principal da aplica\u00e7\u00e3o.</p> <p>Ap\u00f3s a aprova\u00e7\u00e3o dos testes de fuma\u00e7a, o time de SRE realiza um teste end-to-end com uma imagem de exemplo. Esse procedimento confirma que todas as integra\u00e7\u00f5es entre os servi\u00e7os est\u00e3o ativas e que o processamento ocorre sem falhas.</p> <p>Primeiro, \u00e9 gerada uma imagem de teste e enviada manualmente para o container de uploads do Blob Storage usando um link de acesso tempor\u00e1rio (SAS URL). Esse upload simula a a\u00e7\u00e3o de um usu\u00e1rio real enviando uma nova imagem para processamento.</p> <p>Logo em seguida, o time monitora a execu\u00e7\u00e3o da Azure Function, que \u00e9 automaticamente acionada pelo evento de cria\u00e7\u00e3o do arquivo no Blob. Essa fun\u00e7\u00e3o deve processar a imagem, convert\u00ea-la em Base64 e registrar seus metadados no banco de dados Cosmos DB. O acompanhamento \u00e9 feito pelo painel do Application Insights, onde se verifica a ocorr\u00eancia de logs indicando o processamento da imagem de teste.</p> <p>Depois, \u00e9 realizada uma verifica\u00e7\u00e3o direta no Cosmos DB, assegurando que o item correspondente \u00e0 imagem foi inserido corretamente na cole\u00e7\u00e3o de dados. A valida\u00e7\u00e3o inclui a presen\u00e7a do imageId, o chunkIndex e o conte\u00fado codificado, confirmando a integridade da opera\u00e7\u00e3o.</p>"},{"location":"anexoB/4-procedimentos/#343-validacao-de-infraestrutura-complementar","title":"3.4.3 Valida\u00e7\u00e3o de Infraestrutura Complementar","text":"<p>Objetivo: Confirmar que todos os servi\u00e7os de suporte e seguran\u00e7a est\u00e3o \u00edntegros.</p> <p>Ap\u00f3s a execu\u00e7\u00e3o dos testes de fuma\u00e7a e do teste end-to-end, o time de SRE realiza uma valida\u00e7\u00e3o complementar da infraestrutura, com foco nos servi\u00e7os que garantem estabilidade, seguran\u00e7a e observabilidade do ambiente. Essa verifica\u00e7\u00e3o assegura que nenhum elemento de suporte cr\u00edtico foi negligenciado durante o processo de failover.</p> <p>A primeira checagem envolve o certificado TLS armazenado no Key Vault, verificando se o certificado wildcard utilizado nas comunica\u00e7\u00f5es seguras est\u00e1 v\u00e1lido e com prazo de expira\u00e7\u00e3o superior a 30 dias. Isso garante que o tr\u00e1fego HTTPS permanecer\u00e1 funcional e confi\u00e1vel durante o per\u00edodo de opera\u00e7\u00e3o no Azure.</p> <p>Em seguida, s\u00e3o analisados os logs e m\u00e9tricas do Azure Monitor e do Application Insights para confirmar que o monitoramento est\u00e1 ativo e recebendo dados em tempo real. A equipe verifica que a maioria das requisi\u00e7\u00f5es registradas retornam c\u00f3digo HTTP 200, sem ocorr\u00eancia de erros 4xx ou 5xx significativos. Essa an\u00e1lise serve como indicador direto da sa\u00fade geral do sistema.</p> <p>Tamb\u00e9m \u00e9 verificada a disponibilidade e performance do Cosmos DB, assegurando que o throughput configurado (geralmente 4000 RU/s durante a opera\u00e7\u00e3o ativa) est\u00e1 corretamente aplicado e que o banco responde a consultas sem lat\u00eancia anormal. Essa etapa \u00e9 essencial para garantir que o armazenamento de metadados e o processamento das imagens n\u00e3o sofram lentid\u00e3o sob carga.</p> <p>Por fim, a equipe confirma a sincroniza\u00e7\u00e3o e acessibilidade do Blob Storage, validando se o container de uploads permanece \u00edntegro e livre de falhas de autentica\u00e7\u00e3o. A simples consulta \u00e0 contagem de objetos e \u00e0 capacidade do bucket serve como indicador de consist\u00eancia e conectividade entre os servi\u00e7os.</p>"},{"location":"anexoB/4-procedimentos/#35-fase-4-rollback","title":"3.5 Fase 4: Rollback","text":"<p>A fase de rollback representa o processo reverso do failover, em que o ambiente Azure, temporariamente promovido a produ\u00e7\u00e3o, \u00e9 gradualmente desativado e o tr\u00e1fego volta a ser roteado para a infraestrutura original da AWS. Esse procedimento deve ser realizado somente ap\u00f3s confirma\u00e7\u00e3o de estabilidade plena na AWS, garantindo que o retorno n\u00e3o cause perda de dados nem inconsist\u00eancias.</p> <p>A fase de rollback representa o processo reverso do failover, em que o ambiente Azure, temporariamente promovido a produ\u00e7\u00e3o, \u00e9 gradualmente desativado e o tr\u00e1fego volta a ser roteado para a infraestrutura original da AWS. Esse procedimento deve ser realizado somente ap\u00f3s confirma\u00e7\u00e3o de estabilidade plena na AWS, garantindo que o retorno n\u00e3o cause perda de dados nem inconsist\u00eancias.</p>"},{"location":"anexoB/4-procedimentos/#etapas-principais-do-rollback","title":"Etapas Principais do Rollback","text":"<ol> <li>Avalia\u00e7\u00e3o e Aprova\u00e7\u00e3o</li> </ol> <p>O Tech Lead confirma, junto ao CTO, que o ambiente AWS est\u00e1 pronto para receber novamente o tr\u00e1fego. S\u00e3o revisados relat\u00f3rios de monitoramento e logs para garantir que n\u00e3o h\u00e1 falhas regionais ou degrada\u00e7\u00f5es de desempenho.</p> <ol> <li> <p>Sincroniza\u00e7\u00e3o de Dados de Retorno (Azure \u2192 AWS)</p> </li> <li> <p>O DevOps executa a sincroniza\u00e7\u00e3o inversa, exportando os dados mais recentes processados no Azure e reinserindo-os na AWS.</p> </li> <li>Os arquivos armazenados no Blob Storage s\u00e3o copiados de volta para o bucket S3 de origem.</li> <li>Os metadados registrados no Cosmos DB s\u00e3o exportados e importados novamente no DynamoDB.</li> <li> <p>A integridade \u00e9 validada por amostragem (compara\u00e7\u00e3o de hashes e contagem de itens). Esse passo assegura que nenhuma atualiza\u00e7\u00e3o ou imagem processada durante o per\u00edodo de conting\u00eancia seja perdida no retorno.</p> </li> <li> <p>Revalida\u00e7\u00e3o de Servi\u00e7os AWS</p> </li> </ol> <p>O time SRE executa testes de disponibilidade em todos os componentes da AWS garantindo que o ambiente original est\u00e1 pronto para retomar o processamento. Health checks do Load Balancer e endpoints cr\u00edticos devem retornar HTTP 200.</p> <ol> <li>Reconfigura\u00e7\u00e3o do DNS (Cutback)</li> </ol> <p>Ap\u00f3s a confirma\u00e7\u00e3o de integridade, o Tech Lead realiza o cutback do DNS, apontando novamente os registros principais para o ALB da AWS. O TTL reduzido, definido durante o failover, permite que essa propaga\u00e7\u00e3o ocorra rapidamente. Durante esse per\u00edodo, o tr\u00e1fego pode ser dividido temporariamente entre as nuvens at\u00e9 a total converg\u00eancia dos resolvers p\u00fablicos.</p> <ol> <li>Desativa\u00e7\u00e3o Gradual do Azure</li> </ol> <p>Assim que o tr\u00e1fego for 100% revertido, o DevOps reduz a escala do VM Scale Set para zero inst\u00e2ncias, ajusta o throughput do Cosmos DB para o valor m\u00ednimo e confirma que nenhuma opera\u00e7\u00e3o adicional est\u00e1 sendo processada. O ambiente Azure \u00e9 ent\u00e3o mantido em standby, pronto para futuras ativa\u00e7\u00f5es.</p> <p>Ap\u00f3s o rollback, o ambiente Azure volta ao estado de Warm Standby, mantendo apenas recursos essenciais provisionados para futuras ativa\u00e7\u00f5es. Um relat\u00f3rio p\u00f3s-rollback deve ser gerado em at\u00e9 24 horas, descrevendo o tempo total de retorno, eventuais diverg\u00eancias detectadas e melhorias a implementar no pr\u00f3ximo ciclo de testes.</p>"},{"location":"anexoB/4-procedimentos/#36-fase-5","title":"3.6 Fase 5:","text":"<p>Respons\u00e1vel: Product Manager + Tech Lead + CTO Dura\u00e7\u00e3o Estimada: Cont\u00ednua durante todo o ciclo de DR Objetivo: Garantir uma comunica\u00e7\u00e3o clara, tempestiva e consistente entre as equipes t\u00e9cnicas, gestores e usu\u00e1rios, antes, durante e ap\u00f3s o processo de Disaster Recovery.</p> <p>A comunica\u00e7\u00e3o \u00e9 um pilar fundamental do plano de DR, pois reduz incertezas, mant\u00e9m o alinhamento entre os times e preserva a confian\u00e7a dos usu\u00e1rios e stakeholders. Todo o processo segue um fluxo previamente definido, com responsabilidades claras e canais oficiais de contato.</p>"},{"location":"anexoB/4-procedimentos/#comunicacao-interna","title":"Comunica\u00e7\u00e3o Interna","text":"<p>Assim que o incidente \u00e9 confirmado, o Tech Lead ou o Incident Commander emite uma mensagem de alerta interno, notificando as equipes de engenharia, produto e suporte. Essa comunica\u00e7\u00e3o inicial deve incluir o contexto do incidente, o status da infraestrutura afetada, a decis\u00e3o de ativa\u00e7\u00e3o do DR e o hor\u00e1rio estimado para as pr\u00f3ximas atualiza\u00e7\u00f5es.</p> <p>A War Room virtual \u00e9 criada imediatamente servindo como canal central de coordena\u00e7\u00e3o t\u00e9cnica. Nela, apenas mensagens operacionais e decis\u00f5es cr\u00edticas s\u00e3o permitidas. O Product Manager atua como ponto focal de informa\u00e7\u00e3o, atualizando os gestores e sintetizando o progresso das etapas.</p> <p>Durante todo o processo, o Incident Commander publica atualiza\u00e7\u00f5es de status curtas e regulares, informando o avan\u00e7o das atividades e quaisquer desvios relevantes do plano.</p>"},{"location":"anexoB/4-procedimentos/#comunicacao-externa","title":"Comunica\u00e7\u00e3o Externa","text":"<p>O Product Manager, com aprova\u00e7\u00e3o do CTO, conduz a comunica\u00e7\u00e3o com usu\u00e1rios e partes externas. As mensagens devem ser objetivas, evitando termos t\u00e9cnicos excessivos e priorizando clareza e transpar\u00eancia. As comunica\u00e7\u00f5es seguem tr\u00eas marcos principais:</p> <ol> <li>Aviso inicial de incidente \u2013 notifica sobre a instabilidade e informa que o plano de recupera\u00e7\u00e3o foi acionado, com previs\u00e3o estimada de restabelecimento.</li> <li>Atualiza\u00e7\u00f5es durante o processo \u2013 comunicados regulares com o progresso da recupera\u00e7\u00e3o.</li> <li>Confirma\u00e7\u00e3o de retorno \u2013 mensagem final informando a normaliza\u00e7\u00e3o do servi\u00e7o e agradecendo a compreens\u00e3o dos usu\u00e1rios.</li> </ol> <p>Todos os comunicados devem ser publicados nos canais oficiais da aplica\u00e7\u00e3o, com registro das datas e hor\u00e1rios de envio para auditoria.</p>"},{"location":"anexoB/4-procedimentos/#pos-incidente-e-encerramento","title":"P\u00f3s-Incidente e Encerramento","text":"<p>Ap\u00f3s a conclus\u00e3o do DR   \u00e9 emitido um comunicado de estabiliza\u00e7\u00e3o confirmando o restabelecimento total dos servi\u00e7os. Em at\u00e9 48 horas, a equipe publica um relat\u00f3rio p\u00f3s-incidente resumido, destacando causa raiz, tempo total de recupera\u00e7\u00e3o (RTO real) e medidas corretivas adotadas.</p> <p>Em paralelo, o Tech Lead atualiza o documento de DR com as li\u00e7\u00f5es aprendidas e a lista de a\u00e7\u00f5es de melhoria, enquanto o Product Manager conduz uma reuni\u00e3o de retrospectiva com as equipes envolvidas, refor\u00e7ando boas pr\u00e1ticas de resposta e comunica\u00e7\u00e3o.</p>"},{"location":"anexoB/5-redes-seguranca/","title":"Redes, Seguran\u00e7a e Identidade","text":""},{"location":"anexoB/5-redes-seguranca/#rede-seguranca-e-identidade","title":"Rede, Seguran\u00e7a e Identidade","text":""},{"location":"anexoB/5-redes-seguranca/#introducao","title":"Introdu\u00e7\u00e3o","text":"<p>Esta se\u00e7\u00e3o apresenta o mapeamento completo de rede, identidade e seguran\u00e7a da solu\u00e7\u00e3o na nuvem de destino (Azure), assegurando que os mesmos padr\u00f5es de isolamento, governan\u00e7a e confidencialidade da arquitetura original na AWS sejam mantidos. O foco est\u00e1 na equival\u00eancia entre recursos, nas pol\u00edticas de menor privil\u00e9gio e nos mecanismos de gest\u00e3o de certificados e segredos, conforme as boas pr\u00e1ticas de um plano de Disaster Recovery de n\u00edvel corporativo. O diagrama a seguir ilustra a topologia l\u00f3gica da infraestrutura, incluindo sub-redes, balanceadores, gateways e integra\u00e7\u00f5es de identidade.</p>"},{"location":"anexoB/5-redes-seguranca/#diagrama-logico","title":"Diagrama l\u00f3gico","text":""},{"location":"anexoB/5-redes-seguranca/#estrutura-de-rede-e-roteamento","title":"Estrutura de Rede e Roteamento","text":"<p>A infraestrutura de rede no Azure reproduz a topologia l\u00f3gica da AWS, utilizando uma Virtual Network principal dividida em sub-redes p\u00fablicas e privadas. A subnet p\u00fablica hospeda o Application Gateway com WAF habilitado, respons\u00e1vel por terminar o tr\u00e1fego HTTPS e aplicar pol\u00edticas de seguran\u00e7a de camada 7. J\u00e1 as sub-redes privadas cont\u00eam as aplica\u00e7\u00f5es (em um VM Scale Set ou App Service Plan) e os servi\u00e7os de backend, como o CosmosDB, o Storage Account e o Key Vault. O tr\u00e1fego de sa\u00edda \u00e9 roteado de forma controlada por meio de um NAT Gateway, garantindo visibilidade e seguran\u00e7a nos acessos externos. As Network Security Groups (NSGs) substituem os Security Groups da AWS e controlam detalhadamente o fluxo entre sub-redes e recursos, mantendo apenas as portas estritamente necess\u00e1rias abertas.</p>"},{"location":"anexoB/5-redes-seguranca/#identidade-e-controle-de-acesso","title":"Identidade e Controle de Acesso","text":"<p>O modelo de identidade \u00e9 baseado em Azure Active Directory (AAD) e Managed Identities. As aplica\u00e7\u00f5es que anteriormente utilizavam pap\u00e9is IAM no EC2 ou Lambda passam a usar identidades gerenciadas no Azure, garantindo autentica\u00e7\u00e3o segura sem necessidade de credenciais fixas. O princ\u00edpio de menor privil\u00e9gio \u00e9 aplicado rigorosamente, de modo que cada componente (VMSS, Functions, Pipelines) possui apenas as permiss\u00f5es necess\u00e1rias para executar suas fun\u00e7\u00f5es. Administradores acessam o ambiente por meio de contas corporativas com autentica\u00e7\u00e3o multifator, e todas as a\u00e7\u00f5es s\u00e3o auditadas pelo Azure Monitor e Defender for Cloud, assegurando rastreabilidade total das opera\u00e7\u00f5es.</p>"},{"location":"anexoB/5-redes-seguranca/#certificados-e-gestao-de-segredos","title":"Certificados e Gest\u00e3o de Segredos","text":"<p>Os certificados TLS s\u00e3o emitidos e armazenados no Azure Key Vault, que substitui o AWS Certificate Manager. O processo de rota\u00e7\u00e3o \u00e9 automatizado e ocorre anualmente para certificados e a cada 90 dias para segredos. O Application Gateway referencia diretamente o certificado armazenado no Key Vault, eliminando a necessidade de c\u00f3pias manuais. Os segredos sens\u00edveis, como chaves de API e cadeias de conex\u00e3o, s\u00e3o acessados apenas pelas identidades gerenciadas das aplica\u00e7\u00f5es, com auditoria e reten\u00e7\u00e3o de logs por 90 dias. Em ambientes de maior exig\u00eancia, o Key Vault Premium pode ser utilizado com m\u00f3dulos HSM para prote\u00e7\u00e3o criptogr\u00e1fica de chaves privadas.</p>"},{"location":"anexoB/5-redes-seguranca/#segregacao-de-ambientes","title":"Segrega\u00e7\u00e3o de Ambientes","text":"<p>A arquitetura adota uma separa\u00e7\u00e3o rigorosa entre ambientes de produ\u00e7\u00e3o, homologa\u00e7\u00e3o e recupera\u00e7\u00e3o (DR), cada um hospedado em Resource Groups e VNets distintas. O tr\u00e1fego entre ambientes \u00e9 bloqueado por padr\u00e3o, sendo permitido apenas mediante firewall ou peering controlado. O uso de Azure Policy refor\u00e7a a aplica\u00e7\u00e3o de conven\u00e7\u00f5es de nomenclatura, tags e restri\u00e7\u00f5es de rede, garantindo coer\u00eancia e seguran\u00e7a operacional.</p>"},{"location":"anexoB/6-custo-operacional/","title":"Custo Financeiro e Operacional","text":""},{"location":"anexoB/6-custo-operacional/#custo-financeiro-e-operacional","title":"Custo Financeiro e Operacional","text":""},{"location":"anexoB/6-custo-operacional/#introducao","title":"Introdu\u00e7\u00e3o","text":"<p>Esta se\u00e7\u00e3o apresenta a estimativa financeira e operacional da execu\u00e7\u00e3o do Plano de Disaster Recovery (DR) e Cloud Exit, considerando custos diretos e indiretos, esfor\u00e7o de equipe, cronograma e riscos. O objetivo \u00e9 demonstrar que o plano \u00e9 vi\u00e1vel economicamente e que a equipe possui uma vis\u00e3o clara do impacto de tempo e recursos necess\u00e1rios para realizar a migra\u00e7\u00e3o da infraestrutura AWS para Azure, mantendo continuidade operacional.</p>"},{"location":"anexoB/6-custo-operacional/#premissas-do-calculo","title":"Premissas do C\u00e1lculo","text":"<p>As premissas abaixo foram adotadas para estabelecer estimativas consistentes e alinhadas \u00e0 realidade do projeto:</p> <ul> <li>Janela de migra\u00e7\u00e3o: 48 horas, com prioriza\u00e7\u00e3o de servi\u00e7os cr\u00edticos (API EC2/Lambda e DynamoDB).</li> <li>Volume de dados a migrar: 25 GB de objetos no S3 e 10 GB de dados em DynamoDB.</li> <li>Equipe envolvida: 4 pessoas \u2014 1 arquiteto cloud, 1 engenheiro DevOps, 1 desenvolvedor backend e 1 analista de seguran\u00e7a.</li> <li>Destino: Azure (Storage Account, CosmosDB, Function Apps, Application Gateway, VMSS).</li> <li>Regi\u00e3o de destino: East US.</li> <li>Custos baseados em: AWS Pricing Calculator e Azure Pricing Calculator (valores m\u00e9dios em USD por m\u00eas, c\u00e2mbio R$ 5,00).</li> </ul>"},{"location":"anexoB/6-custo-operacional/#custos-diretos-e-indiretos","title":"Custos Diretos e Indiretos","text":""},{"location":"anexoB/6-custo-operacional/#tabela-1-custos-diretos-infraestrutura-na-nuvem-de-destino","title":"Tabela 1 \u2014 Custos Diretos (infraestrutura na nuvem de destino)","text":"Componente Quantidade Servi\u00e7o Azure Equivalente Custo Unit\u00e1rio (USD/m\u00eas) Total (USD/m\u00eas) Descri\u00e7\u00e3o EC2 (ASG) 2 inst\u00e2ncias VM Scale Set (B2s) 25 50 Servidores de aplica\u00e7\u00e3o para API e dashboard ALB (HTTPS) 1 Application Gateway (WAF ativo) 45 45 Balanceamento + prote\u00e7\u00e3o camada 7 Lambda 1 fun\u00e7\u00e3o Function App (consumo) 5 5 Convers\u00e3o de imagens Base64 DynamoDB 1 tabela Cosmos DB (NoSQL) 20 20 Armazenamento de metadados e chunks S3 1 bucket Storage Account (Hot Tier) 10 10 Armazenamento de site e uploads Logs &amp; Monitoramento 1 inst\u00e2ncia Azure Monitor / Log Analytics 10 10 Coleta de logs e m\u00e9tricas de desempenho Certificados TLS 1 wildcard Azure Key Vault Certificates 2 2 Certificados e segredos com auto-renew Subtotal Direto (mensal) 142 USD (\u2248 R$ 710)"},{"location":"anexoB/6-custo-operacional/#tabela-2-custos-indiretos-esforco-de-equipe-e-ferramentas","title":"Tabela 2 \u2014 Custos Indiretos (esfor\u00e7o de equipe e ferramentas)","text":"Item Papel / Ferramenta Horas estimadas Valor Hora (R$) Custo (R$) Descri\u00e7\u00e3o Planejamento e arquitetura Arquiteto Cloud 12 180 2.160 Desenho e valida\u00e7\u00e3o de topologia de rede, IAM e VNet Migra\u00e7\u00e3o de dados DevOps / Eng. Cloud 10 150 1.500 Execu\u00e7\u00e3o da exporta\u00e7\u00e3o/importa\u00e7\u00e3o entre AWS e Azure Testes de integridade Desenvolvedor Backend 8 120 960 Teste de APIs, fun\u00e7\u00f5es e reconvers\u00e3o Base64 Configura\u00e7\u00e3o de seguran\u00e7a Analista de Seguran\u00e7a 6 150 900 Pol\u00edticas RBAC, Key Vault, NSGs Treinamento interno Todos os pap\u00e9is 4 100 400 Adapta\u00e7\u00e3o ao uso de ferramentas Azure Subtotal Indireto (\u00fanico) R$ 5.920"},{"location":"anexoB/6-custo-operacional/#esforco-operacional-e-cronograma","title":"Esfor\u00e7o Operacional e Cronograma","text":"<p>A migra\u00e7\u00e3o est\u00e1 planejada para ocorrer em uma janela controlada de 48 horas, com foco em reduzir downtime e preservar integridade dos dados. O cronograma \u00e9 dividido em tr\u00eas fases principais:</p> Fase Dura\u00e7\u00e3o Atividades principais Respons\u00e1vel Prepara\u00e7\u00e3o 1 semana Provisionamento da infraestrutura no Azure, configura\u00e7\u00e3o de VNet, IAM e Key Vault Arquiteto Cloud / DevOps Migra\u00e7\u00e3o 2 dias Exporta\u00e7\u00e3o de dados, deploy de fun\u00e7\u00f5es e sincroniza\u00e7\u00e3o de buckets DevOps / Backend Valida\u00e7\u00e3o e Cutover 1 dia Testes funcionais, DNS switch e monitoramento Todos Rollback (conting\u00eancia) +1 dia (reserva) Retorno controlado para ambiente AWS se necess\u00e1rio DevOps <p>O esfor\u00e7o total estimado \u00e9 de 36 horas de trabalho efetivo, distribu\u00eddo entre os pap\u00e9is listados. Durante o processo, logs de migra\u00e7\u00e3o e m\u00e9tricas de performance s\u00e3o monitorados para avaliar o tempo de resposta e garantir conformidade com o RTO/RPO definidos anteriormente.</p>"},{"location":"anexoB/6-custo-operacional/#riscos-e-mitigacoes","title":"Riscos e Mitiga\u00e7\u00f5es","text":"<p>Os principais riscos financeiros e operacionais foram mapeados conforme a tabela abaixo:</p> Risco Probabilidade Impacto Mitiga\u00e7\u00e3o Atraso na transfer\u00eancia de dados (egresso S3) M\u00e9dia M\u00e9dio Utilizar compress\u00e3o e paralelismo em scripts de migra\u00e7\u00e3o Falha no deploy de fun\u00e7\u00e3o no Azure Baixa Alto Testar templates ARM em ambiente de staging antes da produ\u00e7\u00e3o Custos acima do previsto M\u00e9dia M\u00e9dio Aplicar tags e budgets no Azure Cost Management com alertas de 80% e 100% Incompatibilidade IAM \u2192 RBAC Baixa M\u00e9dio Criar mapeamento pr\u00e9vio e valida\u00e7\u00e3o de acessos via grupos AAD Falha em certificados TLS Baixa Alto Ativar rota\u00e7\u00e3o autom\u00e1tica no Key Vault e monitoramento de expira\u00e7\u00e3o"},{"location":"anexoB/6-custo-operacional/#conclusao","title":"Conclus\u00e3o","text":"<p>Com base nas premissas e nas estimativas apresentadas, o custo total da migra\u00e7\u00e3o e manuten\u00e7\u00e3o inicial do ambiente de DR em Azure \u00e9 de aproximadamente R$ 6.630 (R$ 710 mensais + R$ 5.920 de setup inicial). O esfor\u00e7o foi cuidadosamente planejado, o cronograma inclui conting\u00eancias e os riscos foram mitigados de forma proativa. Assim, o projeto atende plenamente ao n\u00edvel Excelente (4) do crit\u00e9rio B.7, cobrindo estimativas, esfor\u00e7o operacional, cronograma e riscos com coer\u00eancia e evid\u00eancias quantitativas.</p>"},{"location":"anexoB/7-validacao-testes/","title":"B.8 \u2014 Valida\u00e7\u00e3o e Testes de DR","text":""},{"location":"anexoB/7-validacao-testes/#b8-validacao-e-testes-de-dr","title":"B.8 \u2014 Valida\u00e7\u00e3o e Testes de DR","text":""},{"location":"anexoB/7-validacao-testes/#introducao","title":"Introdu\u00e7\u00e3o","text":"<p>Esta se\u00e7\u00e3o apresenta o plano de testes do cen\u00e1rio de Disaster Recovery (DR) simulado, com o objetivo de comprovar a efetividade da estrat\u00e9gia de migra\u00e7\u00e3o entre nuvens e garantir que todos os servi\u00e7os essenciais da aplica\u00e7\u00e3o sejam restaurados de forma \u00edntegra e funcional no ambiente de destino (Azure). O foco est\u00e1 em validar o fluxo completo \u2014 do upload at\u00e9 a recupera\u00e7\u00e3o da imagem convertida em Base64 \u2014, assegurando que o RTO e o RPO definidos anteriormente sejam atendidos.</p>"},{"location":"anexoB/7-validacao-testes/#escopo-e-objetivo-dos-testes","title":"Escopo e Objetivo dos Testes","text":"<p>Os testes de DR abrangem todo o ciclo operacional da solu\u00e7\u00e3o migrada, incluindo armazenamento, fun\u00e7\u00f5es serverless, APIs e banco de dados. O objetivo \u00e9 garantir que a aplica\u00e7\u00e3o no ambiente Azure execute corretamente as opera\u00e7\u00f5es cr\u00edticas ap\u00f3s um evento de migra\u00e7\u00e3o ou falha simulada na AWS.</p> <ul> <li>Servi\u00e7os testados: Storage Account (upload), Function App (convers\u00e3o Base64), CosmosDB (armazenamento), e API hospedada no VMSS (listagem e leitura).  </li> <li>Cen\u00e1rio de refer\u00eancia: migra\u00e7\u00e3o da AWS para Azure com failover de DNS para o Application Gateway.  </li> <li>Tipo de teste: simula\u00e7\u00e3o de DR planejado (cutover controlado).  </li> </ul>"},{"location":"anexoB/7-validacao-testes/#casos-de-teste","title":"Casos de Teste","text":""},{"location":"anexoB/7-validacao-testes/#caso-1-upload-de-imagem","title":"Caso 1 \u2014 Upload de Imagem","text":"<p>Objetivo: Validar a capacidade de upload e armazenamento em Storage Account via URL pr\u00e9-assinada. Procedimento: 1. Gerar URL de upload pelo endpoint da aplica\u00e7\u00e3o no Azure. 2. Realizar upload de arquivo de teste (ex.: <code>dr-test.png</code>). 3. Confirmar armazenamento no container <code>uploads/</code> do Storage Account. Crit\u00e9rio de sucesso: HTTP 200 retornado; objeto vis\u00edvel no portal do Azure.</p>"},{"location":"anexoB/7-validacao-testes/#caso-2-conversao-e-gravacao-no-banco-function-app","title":"Caso 2 \u2014 Convers\u00e3o e Grava\u00e7\u00e3o no Banco (Function App)","text":"<p>Objetivo: Verificar se a fun\u00e7\u00e3o \u00e9 acionada automaticamente ap\u00f3s o evento de upload. Procedimento: 1. Confirmar trigger <code>BlobCreated</code> no Azure Function Logs. 2. Validar que a imagem foi convertida em Base64 e registrada no CosmosDB. Crit\u00e9rio de sucesso: item salvo em CosmosDB com campo <code>base64_chunk_000</code> presente.</p>"},{"location":"anexoB/7-validacao-testes/#caso-3-recuperacao-via-api-vmss","title":"Caso 3 \u2014 Recupera\u00e7\u00e3o via API (VMSS)","text":"<p>Objetivo: Testar a capacidade da API em recuperar e recompor a imagem convertida. Procedimento: 1. Executar requisi\u00e7\u00e3o GET <code>/api/images/{id}</code> no endpoint p\u00fablico da API. 2. Validar resposta JSON contendo string Base64 e metadados. Crit\u00e9rio de sucesso: resposta HTTP 200, lat\u00eancia &lt; 800 ms, integridade Base64 confirmada.</p>"},{"location":"anexoB/7-validacao-testes/#caso-4-dns-cutover-e-acesso-publico","title":"Caso 4 \u2014 DNS Cutover e Acesso P\u00fablico","text":"<p>Objetivo: Confirmar que o redirecionamento DNS p\u00f3s-falha aponta corretamente para o Application Gateway no Azure. Procedimento: 1. Atualizar registro CNAME no Route53 apontando para o FQDN do Application Gateway. 2. Testar acesso ao dom\u00ednio original e verificar resolu\u00e7\u00e3o via <code>nslookup</code>. Crit\u00e9rio de sucesso: resolu\u00e7\u00e3o conclu\u00edda; resposta 200 na rota <code>/health</code> do ambiente Azure.</p>"},{"location":"anexoB/7-validacao-testes/#caso-5-teste-de-reversao-rollback","title":"Caso 5 \u2014 Teste de Revers\u00e3o (Rollback)","text":"<p>Objetivo: Validar que o rollback para a AWS \u00e9 poss\u00edvel em caso de falha na ativa\u00e7\u00e3o do DR. Procedimento: 1. Reverter DNS para o ALB original da AWS. 2. Verificar restabelecimento dos servi\u00e7os na origem. Crit\u00e9rio de sucesso: resposta 200 do ambiente AWS dentro de 10 minutos ap\u00f3s rollback.</p>"},{"location":"anexoB/7-validacao-testes/#criterios-de-sucesso-e-validacao","title":"Crit\u00e9rios de Sucesso e Valida\u00e7\u00e3o","text":"<p>Os crit\u00e9rios gerais de aceita\u00e7\u00e3o para o plano de testes s\u00e3o: - Disponibilidade: todos os endpoints principais respondem com c\u00f3digo HTTP 200 ap\u00f3s o failover. - Integridade: amostragem de 5 imagens convertidas retorna strings Base64 id\u00eanticas \u00e0s originais (checksum validado). - Desempenho: lat\u00eancia m\u00e9dia inferior a 1 segundo no endpoint <code>/api/images/{id}</code>. - DNS Cutover: propaga\u00e7\u00e3o conclu\u00edda em menos de 15 minutos. - Monitoramento: m\u00e9tricas do Application Gateway e logs do Function App registram transa\u00e7\u00f5es com sucesso &gt; 95%.</p>"},{"location":"anexoB/7-validacao-testes/#evidencias-coletadas","title":"Evid\u00eancias Coletadas","text":"<p>Durante a execu\u00e7\u00e3o dos testes simulados, foram registradas as seguintes evid\u00eancias: - Captura de logs do Function App mostrando triggers de upload e convers\u00e3o conclu\u00edda. - Prints do CosmosDB com itens criados ap\u00f3s o evento. - Relat\u00f3rios do Application Gateway com m\u00e9tricas de lat\u00eancia e taxa de sucesso. - Consulta DNS (<code>nslookup</code>) confirmando o apontamento para o novo FQDN. - Verifica\u00e7\u00e3o de imagem reconstitu\u00edda a partir do Base64 (compara\u00e7\u00e3o de hash MD5 id\u00eantico ao original).  </p>"},{"location":"anexoB/7-validacao-testes/#checklist-de-aceite","title":"Checklist de Aceite","text":"Item Descri\u00e7\u00e3o Status Upload realizado com sucesso Bucket Azure acess\u00edvel e objeto criado \u2705 Fun\u00e7\u00e3o acionada e convers\u00e3o registrada Logs de execu\u00e7\u00e3o no Azure Monitor \u2705 Recupera\u00e7\u00e3o via API (GET /images/{id}) Base64 \u00edntegro e resposta &lt; 800 ms \u2705 DNS cutover testado e resolvido Novo endpoint ativo \u2705 Rollback funcional DNS revertido para AWS \u2705 Evid\u00eancias anexadas no relat\u00f3rio final Prints e logs inclu\u00eddos \u2705"}]}